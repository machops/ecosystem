# @ECO-governed
# @ECO-layer: GL00-09
# @ECO-semantic: general-component
# @ECO-audit-trail: gl-enterprise-architecture/governance/audit-trails/GL00_09-audit.json
#
# GL Unified Architecture Governance Framework Activated
# GL Root Semantic Anchor: gl-enterprise-architecture/governance/ECO-ROOT-SEMANTIC-ANCHOR.yaml
# GL Unified Naming Charter: gl-enterprise-architecture/governance/ECO-UNIFIED-NAMING-CHARTER.yaml


apiVersion: semantic.gl/v1
kind: FoldingEngineConfig

spec:
  folding_strategies:
    vector_folding:
      enabled: true
      algorithm: "semantic-embedding"
      model: "gl-semantic-encoder-v2"
      dimensions: 768
      quantization: "int8"
      compression: true
      
    graph_folding:
      enabled: true
      algorithm: "knowledge-graph-compression"
      graph_database: "neo4j-gds"
      node_compression: true
      edge_compression: true
      path_indexing: true
      
    hybrid_folding:
      enabled: true
      algorithm: "vector-graph-fusion"
      fusion_method: "attention-based"
      optimization: "adaptive"
      
  folding_parameters:
    batch_size: 1000
    chunk_size: 100
    parallelism: 8
    cache_size_gb: 10
    timeout_seconds: 300
    
    feature_extraction:
      enabled: true
      methods:
        - semantic_keywords:
            enabled: true
            weight: 0.3
            
        - context_window:
            enabled: true
            window_size: 5
            weight: 0.2
            
        - dependency_graph:
            enabled: true
            max_depth: 3
            weight: 0.3
            
        - semantic_distance:
            enabled: true
            metric: "cosine"
            weight: 0.2
            
    vectorization:
      model: "gl-semantic-encoder-v2"
      pooling: "mean"
      normalization: "l2"
      similarity_metric: "cosine"
      
    indexing:
      primary_index: "vector"
      secondary_index: "graph"
      tertiary_index: "text"
      
      vector_index:
        type: "HNSW"
        m: 32
        ef_construction: 200
        ef_search: 100
        
      graph_index:
        type: "Neo4j-GDS"
        relationship_types: 
          - "domain-capability"
          - "capability-resource"
          - "resource-label"
        node_labels:
          eco-base/part-of: eco-base
          eco-base/governance: aligned
          - "domain"
          - "capability"
          - "resource"
          - "label"
          - "semantic"
          
  performance_optimization:
    query_optimization:
      enabled: true
      strategies:
        - semantic_query_rewriting:
            enabled: true
            
        - vector_query_acceleration:
            enabled: true
            hardware: "GPU"
            batch_size: 1024
            
        - graph_traversal_optimization:
            enabled: true
            algorithm: "bidirectional-bfs"
            
        - cache_aware_semantic_search:
            enabled: true
            cache_levels: 3
            l1_cache_size_mb: 512
            l2_cache_size_mb: 2048
            
    index_optimization:
      enabled: true
      strategies:
        - composite_index:
            fields: ["domain", "capability", "semantic_type"]
            order: ["domain", "capability"]
            
        - covering_index:
            include: ["semantics", "description", "abbreviation"]
            
        - partitioned_index:
            partition_by: "domain"
            sub_partition_by: "capability"
            
        - compressed_index:
            compression: "zstd"
            level: 3
            
  computation_optimization:
    vector_batch_processing:
      enabled: true
      batch_size: 1024
      parallel: true
      threads: 8
      
    graph_batch_traversal:
      enabled: true
      batch_size: 100
      parallel: true
      
    semantic_prefetching:
      enabled: true
      lookahead: 10
      confidence_threshold: 0.7
      
  monitoring:
    metrics:
      - name: "semantic_folding_latency"
        type: "histogram"
        labels:
          eco-base/part-of: eco-base
          eco-base/governance: aligned
        buckets: [0.01, 0.05, 0.1, 0.5, 1.0, 5.0]
        
      - name: "vector_search_qps"
        type: "counter"
        labels:
          eco-base/part-of: eco-base
          eco-base/governance: aligned
        
      - name: "semantic_cache_hit_ratio"
        type: "gauge"
        labels:
          eco-base/part-of: eco-base
          eco-base/governance: aligned
        
      - name: "inference_confidence_distribution"
        type: "histogram"
        labels:
          eco-base/part-of: eco-base
          eco-base/governance: aligned
        
    logging:
      level: "info"
      format: "json"
      fields:
        - "semantic_context"
        - "query_id"
        - "user_id"
        - "folding_strategy"
        
    tracing:
      enabled: true
      sampler: "probabilistic"
      rate: 0.1
      exporter: "jaeger"
      
  storage:
    vector_store:
      type: "faiss"
      path: "/data/vectors"
      compression: true
      
    graph_store:
      type: "neo4j"
      uri: "bolt://neo4j:7687"
      database: "semantic_graph"
      
    cache_store:
      type: "redis"
      uri: "redis://redis:6379"
      ttl_hours: 24
      
  api:
    rest_api:
      enabled: true
      port: 8080
      cors_enabled: true
      rate_limit: 100
      
    grpc_api:
      enabled: true
      port: 9090
      compression: "gzip"
      
    graphql_api:
      enabled: true
      port: 8081
      playground_enabled: true