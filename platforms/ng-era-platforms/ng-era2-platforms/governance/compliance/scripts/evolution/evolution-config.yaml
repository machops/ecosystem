# @ECO-layer: GL60-80
# @ECO-governed
# GL 流程自我演化引擎配置文件
# 版本: 1.0.0

storage:
  base_dir: "./gl-evolution-data"
  retention:
    analysis_reports: "180d"
    delta_reports: "365d"
    upgrade_logs: "indefinite"
    snapshots: "90d"
  
  backup:
    enabled: true
    schedule: "0 2 * * *"  # 每天凌晨2點
    retention: "30d"
    location: "./gl-evolution-backups"

analysis:
  enabled: true
  depth: "detailed"
  
  thresholds:
    evidence_coverage: 0.90
    reasoning_quality: 0.85
    confidence_score: 0.75
  
  patterns:
    success:
      min_occurrences: 2
      confidence_threshold: 0.80
    
    failure:
      min_occurrences: 1
      severity_threshold: "medium"
  
  learnings:
    min_confidence: 0.70
    max_learnings_per_execution: 10

delta:
  enabled: true
  
  thresholds:
    significance: 0.15
    similarity: 0.85
    regression_tolerance: 0.05
  
  comparison:
    dimensions:
      - execution_level
      - governance_level
      - process_structure
      - semantic_reasoning
      - quality_performance
    
    method: "semantic-diff-with-context"
    granularity: "semantic"

upgrade:
  auto_approve: false
  review_required: true
  
  auto_upgrade:
    p0: true
    p1: false
    p2: false
    p3: false
  
  risk_assessment:
    enabled: true
    factors:
      - impact
      - complexity
      - dependencies
      - rollback_availability
  
  verification:
    required: true
    tests:
      - functional
      - regression
      - performance
    
    rollback:
      enabled: true
      timeout: "30m"

quality_gates:
  gate1:
    name: "evidence_coverage"
    threshold: 0.90
    enforcement: "strict"
    action: "block"
  
  gate2:
    name: "forbidden_phrase_check"
    threshold: 0
    enforcement: "strict"
    action: "block"
  
  gate3:
    name: "reasoning_quality"
    threshold: 0.85
    enforcement: "strict"
    action: "warn"
  
  gate4:
    name: "upgrade_verification"
    threshold: 1.0
    enforcement: "strict"
    action: "block"

forbidden_phrases:
  critical:
    - "100% 完成"
    - "完全符合"
    - "已全部实现"
    - "絕對正確"
    - "毫無疑問"
  
  high:
    - "應該是"
    - "可能是"
    - "我認為"
    - "大概是"
    - "似乎"
  
  medium:
    - "大概"
    - "差不多"
    - "基本上"
    - "基本上來說"
    - "一般來說"

monitoring:
  enabled: true
  
  metrics:
    process_maturity_index:
      target: 85
      warning: 70
      critical: 60
    
    self_evolution_rate:
      target: 10
      min: 5
      max: 20
    
    learning_absorption_rate:
      target: 80
      warning: 60
      critical: 50
  
  alerts:
    channels:
      slack:
        webhook_url: "${SLACK_WEBHOOK_URL}"
        channel: "#gl-governance-alerts"
      
      email:
        smtp_server: "${SMTP_SERVER}"
        smtp_port: 587
        username: "${SMTP_USERNAME}"
        password: "${SMTP_PASSWORD}"
        from: "gl-evolution@company.com"
        to: "governance-team@company.com"

integration:
  fact_pipeline:
    enabled: true
    endpoint: "http://localhost:8080/api/fact-pipeline"
    timeout: "60s"
  
  governance_engine:
    enabled: true
    endpoint: "http://localhost:8081/api/governance"
    timeout: "60s"
  
  validation_engine:
    enabled: true
    endpoint: "http://localhost:8082/api/validation"
    timeout: "30s"

logging:
  level: "info"
  format: "json"
  
  outputs:
    - type: "file"
      path: "./gl-evolution.log"
      rotation:
        enabled: true
        max_size: "100MB"
        max_age: "7d"
        max_backups: 10
    
    - type: "stdout"
      format: "text"
  
  sensitive_data:
    mask: true
    fields:
      - "password"
      - "token"
      - "api_key"
      - "secret"

performance:
  max_concurrent_analyses: 5
  max_concurrent_upgrades: 1
  
  cache:
    enabled: true
    ttl: "5m"
    max_size: 1000
  
  optimization:
    parallel_execution: true
    batch_size: 100
    timeout: "30m"

security:
  authentication:
    enabled: true
    method: "bearer_token"
    token_ttl: "24h"
  
  authorization:
    enabled: true
    default_role: "viewer"
    roles:
      admin:
        permissions: ["read", "write", "delete", "admin"]
      operator:
        permissions: ["read", "write"]
      viewer:
        permissions: ["read"]
  
  encryption:
    at_rest: true
    algorithm: "AES-256"
    
    in_transit: true
    tls_version: \"1.3\"
labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned


api:
  enabled: true
  port: 8083
  host: "0.0.0.0"
  
  endpoints:
    - path: "/api/v1/executions"
      methods: ["POST", "GET"]
      
    - path: "/api/v1/analyses"
      methods: ["GET"]
      
    - path: "/api/v1/deltas"
      methods: ["GET"]
      
    - path: "/api/v1/upgrades"
      methods: ["POST", "GET"]
      
    - path: "/api/v1/metrics"
      methods: ["GET"]
      
    - path: "/api/v1/statistics"
      methods: ["GET"]
  
  rate_limiting:
    enabled: true
    requests_per_minute: 100
  
  cors:
    enabled: true
    allowed_origins:
      - "http://localhost:3000"
      - "https://dashboard.company.com"