---
apiVersion: machinenativeops.io/v1
kind: RootGlobalConfig
metadata:
  annotations:
    machinenativeops.io/description: Root layer global configuration for MachineNativeOps
      system
  labels:
    eco-base/governance: aligned
    eco-base/part-of: eco-base
    machinenativeops.io/component: global-configuration
    machinenativeops.io/tier: baseline
    machinenativeops.io/version: v1.0.0
  machinenativeops.io/last-modified: '2025-12-20T22:00:00Z'
  name: global-baseline-config
  namespace: machinenativeops-root
spec:
  backup:
    enabled: true
    retention: 30d
    schedule: 0 2 * * *
    storage:
      bucket: machinenativenops-backups
      prefix: root-layer/
      region: us-west-2
      type: s3
  cache:
    database: 0
    host: redis.machinenativenops.svc.cluster.local
    max_memory: 256Mi
    port: 6379
    ttl: 1h
    type: redis
  compatibility:
    deprecated_feature_warning: true
    legacy_api_support: true
    migration_mode: false
  database:
    connection_pool:
      connection_timeout: 30s
      max_connections: 20
      min_connections: 5
    host: postgres.machinenativenops.svc.cluster.local
    name: machinenativenops_root
    port: 5432
    type: postgresql
    username: mno_root_user
  dependencies:
    docker: '>=20.10.0'
    jaeger: '>=1.30.0'
    kubernetes: '>=1.24.0'
    nats: '>=2.8.0'
    postgresql: '>=13.0'
    prometheus: '>=2.30.0'
    redis: '>=6.0'
  environment_overrides:
  - default: INFO
    description: Override default logging level
    name: LOG_LEVEL
  - default: 'true'
    description: Enable or disable monitoring
    name: MONITORING_ENABLED
  - default: production
    description: Set deployment mode (development/staging/production)
    name: DEPLOYMENT_MODE
  - default: machinenativenops-root
    description: Override default namespace
    name: NAMESPACE
  feature_flags:
    enable_advanced_security: true
    enable_debug_mode: false
    enable_experimental_features: false
    enable_extended_logging: true
    enable_performance_profiling: false
  localization:
    date_format: YYYY-MM-DD
    datetime_format: YYYY-MM-DD HH:mm:ss
    locale: en_US.UTF-8
    time_format: HH:mm:ss
    timezone: UTC
  logging:
    format: structured
    level: INFO
    outputs:
    - path: /var/log/machinenativenops/root.log
      retention: 30d
      rotation: daily
      type: file
    - facility: daemon
      tag: machinenativenops-root
      type: syslog
    - format: json
      type: stdout
  message_queue:
    max_reconnects: 10
    reconnect_wait: 2s
    servers:
    - nats://nats-1.machinenativenops.svc.cluster.local:4222
    - nats://nats-2.machinenativenops.svc.cluster.local:4222
    - nats://nats-3.machinenativenops.svc.cluster.local:4222
    type: nats
  monitoring:
    enabled: true
    health_check_port: 8080
    metrics_port: 9090
    prometheus:
      enabled: true
      endpoint: /metrics
      namespace: machinenativenops_root
    tracing:
      enabled: true
      jaeger_endpoint: http://jaeger:14268/api/traces
      sampling_rate: 0.1
  namespace:
    default: machinenativeops-root
    execution: machinenativeops-execution
    governance: machinenativeops-governance
    modules: machinenativeops-modules
    provenance: machinenativeops-provenance
    trust: machinenativeops-trust
  network:
    allowed_origins:
    - https://console.machinenativenops.io
    - https://api.machinenativenops.io
    certificate_path: /etc/machinenativenops/certs/server.crt
    listen_port: 8443
    private_key_path: /etc/machinenativenops/certs/server.key
    tls_enabled: true
  resources:
    cpu:
      limit: 2000m
      request: 100m
    memory:
      limit: 2Gi
      request: 128Mi
    storage:
      limit: 10Gi
      request: 1Gi
  security:
    authentication:
      certificate_ttl: 365d
      method: mutual_tls
    authorization:
      audit_enabled: true
      default_policy: deny_all
    encryption:
      algorithm: AES-256-GCM
      key_rotation_period: 90d
  system:
    deployment_mode: production
    environment: root-layer
    instance_id: ${HOSTNAME:-mno-root-default}
    name: MachineNativeOps
    system_id: mno-root-001
    version: 1.0.0
status:
  conditions:
  - lastTransitionTime: '2025-12-20T22:00:00Z'
    message: Root configuration validation passed successfully
    reason: ValidationPassed
    status: 'True'
    type: ConfigurationValidated
  - lastTransitionTime: '2025-12-20T22:00:00Z'
    message: All required dependencies are available
    reason: DependenciesAvailable
    status: 'True'
    type: DependenciesResolved
  - lastTransitionTime: '2025-12-20T22:00:00Z'
    message: Security configuration completed successfully
    reason: SecuritySetupComplete
    status: 'True'
    type: SecurityConfigured
  phase: Ready
---
apiVersion: v1
data:
  schema.yaml: "# Root Global Configuration Schema\ntype: object\nproperties:\n  system:\n\
    \    type: object\n    properties:\n      name:\n        type: string\n      \
    \  pattern: \"^[a-zA-Z][a-zA-Z0-9-]*$\"\n      version:\n        type: string\n\
    \        pattern: \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\"\n      deployment_mode:\n\
    \        type: string\n        enum: [\"development\", \"staging\", \"production\"\
    ]\n      environment:\n        type: string\n      system_id:\n        type: string\n\
    \        pattern: \"^[a-z0-9-]+$\"\n      instance_id:\n        type: string\n\
    \    required: [\"name\", \"version\", \"deployment_mode\", \"system_id\"]\n \
    \ namespace:\n    type: object\n    properties:\n      default:\n        type:\
    \ string\n      governance:\n        type: string\n      modules:\n        type:\
    \ string\n      trust:\n        type: string\n      provenance:\n        type:\
    \ string\n      execution:\n        type: string\n    required: [\"default\"]\n\
    \  localization:\n    type: object\n    properties:\n      timezone:\n       \
    \ type: string\n      locale:\n        type: string\n      date_format:\n    \
    \    type: string\n      time_format:\n        type: string\n      datetime_format:\n\
    \        type: string\n    required: [\"timezone\", \"locale\"]\n  logging:\n\
    \    type: object\n    properties:\n      level:\n        type: string\n     \
    \   enum: [\"DEBUG\", \"INFO\", \"WARN\", \"ERROR\", \"FATAL\"]\n      format:\n\
    \        type: string\n        enum: [\"structured\", \"unstructured\"]\n    \
    \  outputs:\n        type: array\n        items:\n          type: object\n   \
    \ required: [\"level\", \"format\", \"outputs\"]\nrequired: [\"system\", \"namespace\"\
    , \"localization\", \"logging\"]"
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/root-config-schema
    eco-base/urn: urn:eco-base:k8s:core:configmap:root-config-schema:sha256-3f509f15804e8b4065b3781b20a4557194414591cf9e3620ad1e6e064b150292
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: root-config-schema
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/owner: eco-system
    eco-base/platform: core
  name: root-config-schema
  namespace: machinenativenops-root
