# @ECO-layer: GQS-L0
# @ECO-governed
# @ECO-layer: GL90-99
# @ECO-semantic: governed-configuration
# @ECO-audit-trail: engine/governance/GL_SEMANTIC_ANCHOR.json

# ==============================================================================
# MachineNativeOps Quantum Naming Governance Prometheus Rules
# ==============================================================================
# Metadata:
#   version: v4.0.0-quantum
metadata:
  name: ""
  description: ""
  labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned {}

#   description: Prometheus alerting rules for quantum naming governance monitoring
#   author: MachineNativeOps Observability Team
#   last_updated: 2026-01-23
#   review_date: 2027-01-23
# ==============================================================================

groups:
  - name: quantum-naming-governance
    interval: 30s
    rules:
      # Quantum Coherence Monitoring
      - alert: QuantumNamingDecoherence
        expr: naming_coherence_quantum < 0.999
        for: 2m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: coherence-monitor
        annotations:
          summary: "Quantum naming coherence below threshold"
          description: "Quantum naming coherence is {{ $value }}, below threshold of 0.999"
          runbook: "/repair/quantum-realignment-v4"
          quantum_protocol: "surface_code_correction"
          impact: "High - Risk of quantum state collapse"
          
      - alert: QuantumCoherenceDegradation
        expr: rate(naming_coherence_quantum[5m]) < -0.001
        for: 5m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: coherence-trend
        annotations:
          summary: "Quantum coherence degradation detected"
          description: "Quantum coherence is degrading at rate {{ $value }}"
          runbook: "/repair/quantum-stabilization-v3"
          impact: "Medium - Potential quantum instability"
          
      # Entanglement Strength Monitoring
      - alert: QuantumEntanglementWeak
        expr: entanglement_strength < 0.95
        for: 3m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: entanglement-monitor
        annotations:
          summary: "Quantum entanglement strength below threshold"
          description: "Entanglement strength is {{ $value }}, below threshold of 0.95"
          runbook: "/repair/quantum-entanglement-v3"
          quantum_protocol: "re-entanglement_procedure"
          impact: "Medium - Reduced quantum correlation"
          
      - alert: QuantumEntanglementLoss
        expr: entanglement_strength < 0.8
        for: 1m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: entanglement-monitor
        annotations:
          summary: "Critical quantum entanglement loss"
          description: "Entanglement strength critically low at {{ $value }}"
          runbook: "/repair/quantum-re-entanglement-v4"
          impact: "Critical - Quantum state isolation"
          
      # Conflict Entropy Monitoring
      - alert: QuantumConflictEntropyHigh
        expr: conflict_entropy_quantum > 0.1
        for: 2m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: entropy-monitor
        annotations:
          summary: "High quantum conflict entropy detected"
          description: "Conflict entropy is {{ $value }}, above threshold of 0.1"
          runbook: "/repair/quantum-conflict-resolution-v5"
          impact: "Medium - Increased quantum uncertainty"
          
      - alert: QuantumConflictEntropyCritical
        expr: conflict_entropy_quantum > 0.5
        for: 30s
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: entropy-monitor
        annotations:
          summary: "Critical quantum conflict entropy"
          description: "Conflict entropy critically high at {{ $value }}"
          runbook: "/repair/quantum-decoherence-control-v4"
          impact: "Critical - Quantum system instability"
          
      # Decoherence Rate Monitoring
      - alert: QuantumDecoherenceRateHigh
        expr: decoherence_rate > 0.001
        for: 5m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: decoherence-monitor
        annotations:
          summary: "High quantum decoherence rate"
          description: "Decoherence rate is {{ $value }}, above threshold of 0.001"
          runbook: "/repair/quantum-decoherence-control-v4"
          impact: "Medium - Accelerated quantum information loss"
          
      - alert: QuantumDecoherenceRateCritical
        expr: decoherence_rate > 0.01
        for: 1m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: decoherence-monitor
        annotations:
          summary: "Critical quantum decoherence rate"
          description: "Decoherence rate critically high at {{ $value }}"
          runbook: "/repair/quantum-emergency-stabilization-v5"
          impact: "Critical - Imminent quantum collapse"
          
      # Quantum Naming Violations
      - alert: QuantumNamingViolation
        expr: naming_violations_quantum > 0
        for: 0s
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: violation-monitor
        annotations:
          summary: "Quantum naming violations detected"
          description: "{{ $value }} quantum naming violations detected"
          runbook: "/repair/quantum-violation-resolution-v5"
          quantum_protocol: "violation_quantum_correction"
          impact: "High - Policy violations detected"
          
      - alert: QuantumNamingViolationRate
        expr: rate(naming_violations_quantum[5m]) > 0.1
        for: 2m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: violation-monitor
        annotations:
          summary: "High quantum naming violation rate"
          description: "Naming violation rate is {{ $value }}/second"
          runbook: "/repair/quantum-policy-enforcement-v4"
          impact: "Medium - Policy compliance degradation"
          
      # Quantum State Distribution
      - alert: QuantumStateImbalance
        expr: |
          (
            sum(quantum_state_distribution{state="decoherent"}) /
            sum(quantum_state_distribution)
          ) > 0.1
        for: 5m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: state-monitor
        annotations:
          summary: "Quantum state imbalance detected"
          description: "Decoherent states ratio is {{ $value }}, above threshold of 0.1"
          runbook: "/repair/quantum-state-rebalancing-v3"
          impact: "Medium - Quantum state distribution imbalance"
          
      - alert: QuantumStateCollapse
        expr: |
          (
            sum(quantum_state_distribution{state="decoherent"}) /
            sum(quantum_state_distribution)
          ) > 0.5
        for: 1m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: state-monitor
        annotations:
          summary: "Quantum state collapse detected"
          description: "Decoherent states ratio critically high at {{ $value }}"
          runbook: "/repair/quantum-emergency-recovery-v5"
          impact: "Critical - Quantum system collapse"
          
      # Bell Inequality Tests
      - alert: QuantumBellInequalityViolation
        expr: bell_inequality_value < 2.0
        for: 30s
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: bell-test
        annotations:
          summary: "Bell inequality violation detected"
          description: "Bell inequality value {{ $value }} below classical threshold"
          runbook: "/repair/quantum-bell-validation-v3"
          impact: "Medium - Quantum correlation verification needed"
          
      - alert: QuantumBellInequalityCritical
        expr: bell_inequality_value < 1.5
        for: 10s
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: bell-test
        annotations:
          summary: "Critical Bell inequality violation"
          description: "Bell inequality value critically low at {{ $value }}"
          runbook: "/repair/quantum-correlation-restoration-v4"
          impact: "Critical - Quantum correlation lost"
          
      # Quantum Circuit Performance
      - alert: QuantumCircuitLatencyHigh
        expr: quantum_circuit_duration_seconds > 10
        for: 5m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: performance-monitor
        annotations:
          summary: "High quantum circuit latency"
          description: "Quantum circuit execution time {{ $value }}s above threshold"
          runbook: "/repair/quantum-performance-optimization-v3"
          impact: "Medium - Performance degradation"
          
      - alert: QuantumCircuitErrorRate
        expr: quantum_circuit_error_rate > 0.01
        for: 2m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: error-monitor
        annotations:
          summary: "High quantum circuit error rate"
          description: "Quantum circuit error rate {{ $value }} above threshold"
          runbook: "/repair/quantum-error-correction-v4"
          impact: "Medium - Increased quantum errors"
          
      # Quantum Resource Utilization
      - alert: QuantumQubitExhaustion
        expr: quantum_qubits_used / quantum_qubits_available > 0.9
        for: 2m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: resource-monitor
        annotations:
          summary: "Quantum qubit exhaustion imminent"
          description: "Qubit utilization {{ $value | humanizePercentage }} above 90%"
          runbook: "/repair/quantum-resource-scaling-v3"
          impact: "Medium - Resource constraint"
          
      - alert: QuantumResourceStarvation
        expr: quantum_qubits_used / quantum_qubits_available > 0.98
        for: 30s
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: resource-monitor
        annotations:
          summary: "Critical quantum resource starvation"
          description: "Qubit utilization critically high at {{ $value | humanizePercentage }}"
          runbook: "/repair/quantum-emergency-scaling-v4"
          impact: "Critical - Resource exhaustion"
          
      # Quantum Service Health
      - alert: QuantumGovernanceServiceDown
        expr: up{service="quantum-naming-governance"} == 0
        for: 1m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: critical
          service: quantum-naming-governance
          app.kubernetes.io/component: health-monitor
        annotations:
          summary: "Quantum naming governance service down"
          description: "Quantum naming governance service is unresponsive"
          runbook: "/repair/quantum-service-recovery-v4"
          impact: "Critical - Service unavailable"
          
      - alert: QuantumServiceDegradation
        expr: |
          (
            sum(rate(quantum_requests_total{status_code!~"2.."}[5m])) /
            sum(rate(quantum_requests_total[5m]))
          ) > 0.05
        for: 5m
        labels:
    eco-base/part-of: eco-base
    eco-base/governance: aligned
          severity: warning
          service: quantum-naming-governance
          app.kubernetes.io/component: health-monitor
        annotations:
          summary: "Quantum service degradation"
          description: "Error rate {{ $value | humanizePercentage }} above 5%"
          runbook: "/repair/quantum-service-optimization-v3"
          impact: "Medium - Service performance degraded"

  - name: quantum-naming-metrics
    interval: 15s
    rules:
      # Recording rules for performance optimization
      - record: quantum:naming_coherence:rate5m
        expr: rate(naming_coherence_quantum[5m])
        
      - record: quantum:entanglement_strength:avg5m
        expr: avg_over_time(entanglement_strength[5m])
        
      - record: quantum:conflict_entropy:max1h
        expr: max_over_time(conflict_entropy_quantum[1h])
        
      - record: quantum:decoherence_rate:sum5m
        expr: sum(decoherence_rate[5m])
        
      - record: quantum:violations_total:rate5m
        expr: rate(naming_violations_quantum[5m])
        
      - record: quantum:state_distribution_ratio:decoherent
        expr: |
          sum(quantum_state_distribution{state="decoherent"}) /
          sum(quantum_state_distribution)
          
      - record: quantum:circuit_duration:p95
        expr: histogram_quantile(0.95, quantum_circuit_duration_seconds_bucket)
        
      - record: quantum:circuit_duration:p99
        expr: histogram_quantile(0.99, quantum_circuit_duration_seconds_bucket)
        
      - record: quantum:qubit_utilization:ratio
        expr: quantum_qubits_used / quantum_qubits_available
        
      - record: quantum:requests_success_rate:5m
        expr: |
          (
            sum(rate(quantum_requests_total{status_code=~"2.."}[5m])) /
            sum(rate(quantum_requests_total[5m]))
          )
          
      - record: quantum:bell_inequality_avg:1h
        expr: avg_over_time(bell_inequality_value[1h])