---
apiVersion: v1
data:
  automation-config.yaml: "version: \"1.0\"\n\n# Automated Deployment Processes\n\
    deployment_automation:\n  enabled: true\n  \n  pre_deployment:\n    checks:\n\
    \      health_check:\n        enabled: true\n        endpoint: \"/health\"\n \
    \       expected_status: 200\n        timeout: 30s\n      \n      backup:\n  \
    \      enabled: true\n        verify: true\n        create_if_missing: true\n\
    \      \n      dependency_check:\n        enabled: true\n        services:\n \
    \         - \"postgresql\"\n          - \"redis-master\"\n          - \"resilience-middleware\"\
    \n      \n      configuration_validation:\n        enabled: true\n        schema_validation:\
    \ true\n        secret_verification: true\n      \n      resource_availability:\n\
    \        enabled: true\n        check_pvc: true\n        check_secrets: true\n\
    \        check_configmaps: true\n  \n  deployment:\n    strategy: \"rolling_update\"\
    \n    max_surge: 1\n    max_unavailable: 0\n    timeout: 600s\n    rollback_on_failure:\
    \ true\n    \n    monitoring:\n      enabled: true\n      check_interval: 10s\n\
    \      success_threshold: 3\n      failure_threshold: 3\n    \n    canary_deployment:\n\
    \      enabled: false  # Manual trigger required\n      initial_traffic: 0.10\
    \  # 10%\n      max_traffic: 0.50  # 50%\n      duration: 1800s  # 30 minutes\n\
    \      metrics_to_monitor:\n        - \"error_rate\"\n        - \"latency_p95\"\
    \n        - \"cpu_usage\"\n        - \"memory_usage\"\n  \n  post_deployment:\n\
    \    smoke_tests:\n      enabled: true\n      timeout: 300s\n      tests:\n  \
    \      - name: \"health_check\"\n          endpoint: \"/health\"\n          method:\
    \ \"GET\"\n          expected_status: 200\n        - name: \"api_test\"\n    \
    \      endpoint: \"/api/v1/data\"\n          method: \"GET\"\n          expected_status:\
    \ 200\n        - name: \"metrics_test\"\n          endpoint: \"/api/v1/metrics\"\
    \n          method: \"GET\"\n          expected_status: 200\n    \n    validation:\n\
    \      enabled: true\n      checks:\n        - \"pod_health\"\n        - \"service_availability\"\
    \n        - \"metrics_collection\"\n        - \"log_forwarding\"\n        - \"\
    tracing_enabled\"\n    \n    notification:\n      enabled: true\n      channels:\n\
    \        - \"#deployments\"\n        - \"engineering@machinenativeops.com\"\n\
    \      include_details: true\n      include_metrics: true\n\n# Automated Scaling\
    \ Policies\nscaling_automation:\n  enabled: true\n  \n  policies:\n    cpu_based:\n\
    \      enabled: true\n      scale_up_threshold: 0.70\n      scale_down_threshold:\
    \ 0.30\n      scale_up_factor: 1.5\n      scale_down_factor: 0.75\n      cooldown:\
    \ 300s\n    \n    memory_based:\n      enabled: true\n      scale_up_threshold:\
    \ 0.80\n      scale_down_threshold: 0.40\n      scale_up_factor: 1.5\n      scale_down_factor:\
    \ 0.75\n      cooldown: 300s\n    \n    request_rate_based:\n      enabled: true\n\
    \      scale_up_threshold: 1000  # requests per second per pod\n      scale_down_threshold:\
    \ 200\n      scale_up_factor: 2.0\n      scale_down_factor: 0.5\n      cooldown:\
    \ 180s\n    \n    latency_based:\n      enabled: true\n      scale_up_threshold:\
    \ 500ms  # P95 latency\n      scale_down_threshold: 100ms\n      scale_up_factor:\
    \ 2.0\n      scale_down_factor: 0.5\n      cooldown: 180s\n    \n    queue_depth_based:\n\
    \      enabled: true\n      scale_up_threshold: 100\n      scale_down_threshold:\
    \ 10\n      scale_up_factor: 2.0\n      scale_down_factor: 0.5\n      cooldown:\
    \ 120s\n  \n  constraints:\n    min_replicas: 3\n    max_replicas: 20\n    max_scale_up_rate:\
    \ 2.0  # pods per minute\n    max_scale_down_rate: 1.0  # pods per minute\n  \n\
    \  forecasting:\n    enabled: true\n    model: \"time_series\"\n    forecast_window:\
    \ 3600s  # 1 hour\n    prediction_interval: 300s  # 5 minutes\n    proactive_scaling:\
    \ true\n\n# Automated Health Checks\nhealth_check_automation:\n  enabled: true\n\
    \  \n  checks:\n    application_health:\n      enabled: true\n      endpoint:\
    \ \"/health\"\n      interval: 10s\n      timeout: 5s\n      failure_threshold:\
    \ 3\n      success_threshold: 2\n      auto_restart: true\n      max_restart_attempts:\
    \ 3\n    \n    readiness_health:\n      enabled: true\n      endpoint: \"/ready\"\
    \n      interval: 5s\n      timeout: 3s\n      failure_threshold: 3\n      success_threshold:\
    \ 1\n    \n    liveness_health:\n      enabled: true\n      endpoint: \"/health\"\
    \n      interval: 30s\n      timeout: 10s\n      failure_threshold: 3\n      success_threshold:\
    \ 1\n    \n    database_health:\n      enabled: true\n      check_query: \"SELECT\
    \ 1\"\n      interval: 30s\n      timeout: 10s\n      failure_threshold: 3\n \
    \     auto_reconnect: true\n      max_reconnect_attempts: 5\n    \n    cache_health:\n\
    \      enabled: true\n      command: \"PING\"\n      interval: 30s\n      timeout:\
    \ 5s\n      failure_threshold: 3\n      auto_reconnect: true\n      max_reconnect_attempts:\
    \ 5\n    \n    dependency_health:\n      enabled: true\n      services:\n    \
    \    - name: \"postgresql\"\n          check_type: \"tcp\"\n          port: 5432\n\
    \          interval: 30s\n          timeout: 5s\n          failure_threshold:\
    \ 3\n        - name: \"redis\"\n          check_type: \"tcp\"\n          port:\
    \ 6379\n          interval: 30s\n          timeout: 5s\n          failure_threshold:\
    \ 3\n  \n  actions:\n    on_failure:\n      restart_pod:\n        enabled: true\n\
    \        max_attempts: 3\n        backoff: 60s\n      \n      scale_down:\n  \
    \      enabled: true\n        threshold: 0.5  # 50% of pods failed\n      \n \
    \     notify:\n        enabled: true\n        channels:\n          - \"#health-checks\"\
    \n          - \"oncall@machinenativeops.com\"\n        include_logs: true\n  \
    \  \n    on_recovery:\n      notify:\n        enabled: true\n        channels:\n\
    \          - \"#health-checks\"\n        include_metrics: true\n\n# Automated\
    \ Backup Verification\nbackup_verification_automation:\n  enabled: true\n  \n\
    \  verification:\n    schedule: \"0 */6 * * *\"  # Every 6 hours\n    timeout:\
    \ 1800s  # 30 minutes\n    \n    checks:\n      backup_completeness:\n       \
    \ enabled: true\n        verify_all_resources: true\n        verify_pv_snapshots:\
    \ true\n      \n      backup_integrity:\n        enabled: true\n        checksum_verification:\
    \ true\n        data_validation: true\n      \n      restore_capability:\n   \
    \     enabled: true\n        dry_run: true\n        verify_namespace_restore:\
    \ true\n        verify_pv_restore: true\n      \n      backup_age:\n        enabled:\
    \ true\n        max_age: 86400s  # 24 hours\n        create_if_missing: true\n\
    \    \n    actions:\n      on_failure:\n        notify:\n          enabled: true\n\
    \          severity: \"critical\"\n          channels:\n            - \"#backup-alerts\"\
    \n            - \"oncall@machinenativeops.com\"\n        \n        auto_retry:\n\
    \          enabled: true\n          max_attempts: 3\n          backoff: 300s\n\
    \        \n        create_manual_backup:\n          enabled: true\n          notify_on_completion:\
    \ true\n    \n      on_success:\n        notify:\n          enabled: true\n  \
    \        severity: \"info\"\n          channels:\n            - \"#backup-alerts\"\
    \n        log_metrics: true\n\n# Automated Incident Response\nincident_response_automation:\n\
    \  enabled: true\n  \n  incident_detection:\n    enabled: true\n    sources:\n\
    \      - \"alerts\"\n      - \"metrics\"\n      - \"logs\"\n      - \"health_checks\"\
    \n    \n    severity_levels:\n      critical:\n        auto_create: true\n   \
    \     auto_escalate: true\n        notification_delay: 0s\n        channels:\n\
    \          - \"#critical-alerts\"\n          - \"oncall@machinenativeops.com\"\
    \n      \n      high:\n        auto_create: true\n        auto_escalate: true\n\
    \        notification_delay: 300s  # 5 minutes\n        channels:\n          -\
    \ \"#alerts\"\n          - \"engineering@machinenativeops.com\"\n      \n    \
    \  medium:\n        auto_create: true\n        auto_escalate: false\n        notification_delay:\
    \ 900s  # 15 minutes\n        channels:\n          - \"#alerts\"\n      \n   \
    \   low:\n        auto_create: false\n        auto_escalate: false\n        channels:\n\
    \          - \"#alerts\"\n  \n  automated_actions:\n    enable_istio_retry:\n\
    \      enabled: true\n      condition: \"error_rate > 0.05\"\n      action: \"\
    increase_retry_attempts\"\n      parameters:\n        max_attempts: 5\n      \
    \  backoff_multiplier: 2.0\n    \n    enable_circuit_breaker:\n      enabled:\
    \ true\n      condition: \"error_rate > 0.10\"\n      action: \"open_circuit_breaker\"\
    \n      parameters:\n        timeout: 60s\n        half_open_calls: 3\n    \n\
    \    scale_up:\n      enabled: true\n      condition: \"cpu_usage > 0.80 OR memory_usage\
    \ > 0.85\"\n      action: \"scale_deployment\"\n      parameters:\n        scale_factor:\
    \ 1.5\n        max_replicas: 20\n    \n    enable_rate_limiting:\n      enabled:\
    \ true\n      condition: \"request_rate > 2000\"\n      action: \"apply_rate_limit\"\
    \n      parameters:\n        requests_per_second: 1000\n    \n    enable_degraded_mode:\n\
    \      enabled: true\n      condition: \"system_health_score < 0.50\"\n      action:\
    \ \"enable_degraded_mode\"\n      parameters:\n        level: \"degraded\"\n \
    \   \n    auto_rollback:\n      enabled: true\n      condition: \"error_rate >\
    \ 0.15 AND recent_deployment = true\"\n      action: \"rollback_deployment\"\n\
    \      parameters:\n        rollback_to: \"previous_version\"\n      \n    restart_pods:\n\
    \      enabled: true\n      condition: \"pod_crash_loop_backoff = true\"\n   \
    \   action: \"restart_deployment\"\n      parameters:\n        max_restarts: 3\n\
    \  \n  incident_workflow:\n    creation:\n      auto_assign: true\n      assignee:\
    \ \"oncall\"\n      priority: \"high\"\n      labels:\neco-base/part-of: eco-base\n\
    eco-base/governance: aligned\n        - \"automated\"\n        - \"incident\"\n\
    \      due_date_offset: 86400  # 24 hours\n    \n    escalation:\n      enabled:\
    \ true\n      rules:\n        - condition: \"severity = critical AND time_since_creation\
    \ > 1800s\"\n          action: \"escalate_to_manager\"\n        - condition: \"\
    time_since_creation > 3600s AND status = open\"\n          action: \"escalate_to_director\"\
    \n    \n    closure:\n      auto_close: false\n      require_postmortem: true\n\
    \      postmortem_template: \"postmortem-template.md\"\n    \n    knowledge_capture:\n\
    \      enabled: true\n      auto_create_incident_report: true\n      update_runbooks:\
    \ true\n      create_improvement_tasks: true\n\n# Automated Log Analysis\nlog_analysis_automation:\n\
    \  enabled: true\n  \n  analysis:\n    real_time:\n      enabled: true\n     \
    \ interval: 60s\n      lookback_period: 300s\n      \n      patterns:\n      \
    \  error_patterns:\n          - regex: \"ERROR\"\n            severity: \"error\"\
    \n            aggregate: true\n            threshold: 10\n        \n        exception_patterns:\n\
    \          - regex: \"Exception|Error|Failed\"\n            severity: \"warning\"\
    \n            aggregate: true\n            threshold: 5\n        \n        security_patterns:\n\
    \          - regex: \"Unauthorized|Forbidden|Invalid token\"\n            severity:\
    \ \"critical\"\n            aggregate: false\n            immediate_alert: true\n\
    \        \n        performance_patterns:\n          - regex: \"Slow query|Timeout|Latency\"\
    \n            severity: \"warning\"\n            aggregate: true\n           \
    \ threshold: 3\n    \n    historical:\n      enabled: true\n      schedule: \"\
    0 0 * * *\"  # Daily at midnight\n      lookback_period: 86400s  # 24 hours\n\
    \      \n      analysis_types:\n        - error_trends\n        - exception_patterns\n\
    \        - performance_degradation\n        - resource_usage\n        - user_behavior\n\
    \    \n    anomaly_detection:\n      enabled: true\n      model: \"statistical\"\
    \n      sensitivity: 0.95\n      lookback_period: 604800s  # 7 days\n      \n\
    \      metrics:\n        - error_rate\n        - latency_p95\n        - request_rate\n\
    \        - resource_usage\n  \n  actions:\n    on_anomaly:\n      create_alert:\n\
    \        enabled: true\n        severity: \"warning\"\n        channels:\n   \
    \       - \"#log-analysis\"\n          - \"engineering@machinenativeops.com\"\n\
    \      \n      create_ticket:\n        enabled: true\n        priority: \"medium\"\
    \n        assignee: \"engineering\"\n      \n      update_dashboard:\n       \
    \ enabled: true\n        include_anomaly_details: true\n    \n    on_pattern_match:\n\
    \      error_pattern:\n        notify:\n          enabled: true\n          channels:\n\
    \            - \"#log-analysis\"\n        create_ticket:\n          enabled: true\n\
    \          if_threshold_exceeded: true\n      \n      security_pattern:\n    \
    \    notify:\n          enabled: true\n          severity: \"critical\"\n    \
    \      channels:\n            - \"#security-alerts\"\n            - \"oncall@machinenativeops.com\"\
    \n        create_incident:\n          enabled: true\n          severity: \"high\"\
    \n      \n      performance_pattern:\n        notify:\n          enabled: true\n\
    \          channels:\n            - \"#log-analysis\"\n        create_ticket:\n\
    \          enabled: true\n          priority: \"low\"\n          assignee: \"\
    engineering\""
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/automation-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:automation-config:sha256-19dcf8e2163b2659e2cf30532196c473a3e3921b4d68e0265fdf95a1173bcf48
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: automation
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/governance: aligned
    eco-base/owner: eco-system
    eco-base/part-of: eco-base
    eco-base/platform: core
    environment: production
  name: automation-config
  namespace: production
