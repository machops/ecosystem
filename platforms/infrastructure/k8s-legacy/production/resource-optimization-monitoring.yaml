---
apiVersion: v1
data:
  resource-optimization.yaml: "# Resource utilization monitoring configuration\nresourceOptimization:\n\
    \  enabled: true\n  \n  # CPU optimization\n  cpu:\n    enabled: true\n    interval:\
    \ 1m\n    \n    monitoring:\n      - name: cpu-utilization\n        metric: container_cpu_usage_seconds_total\n\
    \        labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n \
    \         - pod\n          - container\n          - namespace\n        aggregation:\
    \ rate\n        window: 5m\n      \n      - name: cpu-throttling\n        metric:\
    \ container_cpu_cfs_throttled_seconds_total\n        labels:\neco-base/part-of:\
    \ eco-base\neco-base/governance: aligned\n          - pod\n          - container\n\
    \        aggregation: rate\n        window: 5m\n      \n      - name: cpu-request-utilization\n\
    \        metric: container_cpu_usage_seconds_total / kube_pod_container_resource_requests{resource=\"\
    cpu\"}\n        aggregation: rate\n        window: 5m\n    \n    thresholds:\n\
    \      optimal:\n        min: 60\n        max: 80\n      warning:\n        min:\
    \ 40\n        max: 90\n      critical:\n        min: 20\n        max: 95\n   \
    \ \n    actions:\n      - condition: cpu < 40%\n        action: scale-down\n \
    \       maxReduction: 20%\n        cooldown: 10m\n      \n      - condition: cpu\
    \ > 90%\n        action: scale-up\n        maxIncrease: 50%\n        cooldown:\
    \ 5m\n      \n      - condition: cpu-throttling > 10%\n        action: increase-limits\n\
    \        minIncrease: 10%\n        maxIncrease: 50%\n  \n  # Memory optimization\n\
    \  memory:\n    enabled: true\n    interval: 1m\n    \n    monitoring:\n     \
    \ - name: memory-utilization\n        metric: container_memory_working_set_bytes\n\
    \        labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n \
    \         - pod\n          - container\n          - namespace\n        aggregation:\
    \ avg\n        window: 5m\n      \n      - name: memory-request-utilization\n\
    \        metric: container_memory_working_set_bytes / kube_pod_container_resource_requests{resource=\"\
    memory\"}\n        aggregation: avg\n        window: 5m\n      \n      - name:\
    \ memory-usage-by-component\n        metric: go_memstats_heap_inuse_bytes\n  \
    \      labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n   \
    \       - pod\n          - component\n        aggregation: avg\n        window:\
    \ 5m\n    \n    thresholds:\n      optimal:\n        min: 70\n        max: 90\n\
    \      warning:\n        min: 50\n        max: 95\n      critical:\n        min:\
    \ 30\n        max: 98\n    \n    actions:\n      - condition: memory < 50%\n \
    \       action: scale-down\n        maxReduction: 20%\n        cooldown: 10m\n\
    \      \n      - condition: memory > 95%\n        action: scale-up\n        maxIncrease:\
    \ 50%\n        cooldown: 5m\n      \n      - condition: memory-oom > 5\n     \
    \   action: increase-limits\n        minIncrease: 20%\n        maxIncrease: 100%\n\
    \  \n  # Storage optimization\n  storage:\n    enabled: true\n    interval: 5m\n\
    \    \n    monitoring:\n      - name: disk-utilization\n        metric: kubelet_volume_stats_used_bytes\
    \ / kubelet_volume_stats_capacity_bytes\n        labels:\neco-base/part-of: eco-base\n\
    eco-base/governance: aligned\n          - pod\n          - namespace\n       \
    \   - persistentvolumeclaim\n        aggregation: avg\n        window: 5m\n  \
    \    \n      - name: disk-io\n        metric: node_disk_io_time_seconds_total\n\
    \        labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n \
    \         - node\n          - device\n        aggregation: rate\n        window:\
    \ 5m\n      \n      - name: disk-throughput\n        metric: node_disk_io_time_seconds_total\n\
    \        labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n \
    \         - node\n          - device\n        aggregation: rate\n        window:\
    \ 5m\n    \n    thresholds:\n      optimal:\n        min: 40\n        max: 80\n\
    \      warning:\n        min: 30\n        max: 85\n      critical:\n        min:\
    \ 20\n        max: 90\n    \n    actions:\n      - condition: disk < 30%\n   \
    \     action: downsize-pvc\n        minReduction: 10%\n        maxReduction: 30%\n\
    \        cooldown: 1h\n      \n      - condition: disk > 85%\n        action:\
    \ expand-pvc\n        minIncrease: 20%\n        maxIncrease: 100%\n        cooldown:\
    \ 5m\n      \n      - condition: disk-io > 80%\n        action: optimize-io\n\
    \        strategies:\n          - increase-iops\n          - enable-caching\n\
    \          - distribute-io\n  \n  # Network optimization\n  network:\n    enabled:\
    \ true\n    interval: 1m\n    \n    monitoring:\n      - name: network-inbound\n\
    \        metric: container_network_receive_bytes_total\n        labels:\neco-base/part-of:\
    \ eco-base\neco-base/governance: aligned\n          - pod\n          - namespace\n\
    \          - interface\n        aggregation: rate\n        window: 5m\n      \n\
    \      - name: network-outbound\n        metric: container_network_transmit_bytes_total\n\
    \        labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n \
    \         - pod\n          - namespace\n          - interface\n        aggregation:\
    \ rate\n        window: 5m\n      \n      - name: network-connections\n      \
    \  metric: net_conntrack_bytes\n        labels:\neco-base/part-of: eco-base\n\
    eco-base/governance: aligned\n          - node\n        aggregation: avg\n   \
    \     window: 5m\n    \n    thresholds:\n      optimal:\n        min: 10\n   \
    \     max: 70\n        unit: Mbps\n      warning:\n        min: 5\n        max:\
    \ 85\n        unit: Mbps\n      critical:\n        min: 0\n        max: 95\n \
    \       unit: Mbps\n    \n    actions:\n      - condition: network < 5Mbps\n \
    \       action: optimize-routing\n        strategies:\n          - reduce-latency\n\
    \          - enable-compression\n          - batch-requests\n      \n      - condition:\
    \ network > 85Mbps\n        action: scale-network\n        strategies:\n     \
    \     - increase-bandwidth\n          - distribute-load\n          - enable-cdn\n\
    \  \n  # Pod optimization\n  pods:\n    enabled: true\n    interval: 2m\n    \n\
    \    monitoring:\n      - name: pod-count\n        metric: kube_pod_status_phase{phase=\"\
    Running\"}\n        labels:\neco-base/part-of: eco-base\neco-base/governance:\
    \ aligned\n          - namespace\n        aggregation: count\n        window:\
    \ 5m\n      \n      - name: pod-restart-rate\n        metric: increase(kube_pod_container_status_restarts_total[1h])\n\
    \        labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n \
    \         - pod\n          - namespace\n        aggregation: sum\n        window:\
    \ 1h\n      \n      - name: pod-age\n        metric: kube_pod_created\n      \
    \  labels:\neco-base/part-of: eco-base\neco-base/governance: aligned\n       \
    \   - pod\n          - namespace\n        aggregation: avg\n        window: 24h\n\
    \    \n    thresholds:\n      optimal:\n        minPods: 9\n        maxPods: 30\n\
    \        maxRestarts: 5\n      warning:\n        minPods: 6\n        maxPods:\
    \ 40\n        maxRestarts: 10\n      critical:\n        minPods: 3\n        maxPods:\
    \ 50\n        maxRestarts: 20\n    \n    actions:\n      - condition: pods < 6\n\
    \        action: scale-up\n        minPods: 9\n        maxPods: 30\n        cooldown:\
    \ 2m\n      \n      - condition: pods > 40\n        action: scale-down\n     \
    \   minPods: 9\n        maxPods: 30\n        cooldown: 10m\n      \n      - condition:\
    \ restarts > 10\n        action: investigate\n        strategies:\n          -\
    \ check-logs\n          - analyze-crashes\n          - update-image\n        \
    \  - increase-resources\n  \n  # Alerting\n  alerting:\n    enabled: true\n  \
    \  \n    rules:\n      - name: HighCPUUtilization\n        condition: cpu > 90%\n\
    \        duration: 10m\n        severity: warning\n        message: \"High CPU\
    \ utilization detected: {{ value }}%\"\n      \n      - name: LowCPUUtilization\n\
    \        condition: cpu < 40%\n        duration: 30m\n        severity: info\n\
    \        message: \"Low CPU utilization detected: {{ value }}% - consider scaling\
    \ down\"\n      \n      - name: HighMemoryUtilization\n        condition: memory\
    \ > 95%\n        duration: 5m\n        severity: critical\n        message: \"\
    High memory utilization detected: {{ value }}%\"\n      \n      - name: LowMemoryUtilization\n\
    \        condition: memory < 50%\n        duration: 30m\n        severity: info\n\
    \        message: \"Low memory utilization detected: {{ value }}% - consider scaling\
    \ down\"\n      \n      - name: HighDiskUtilization\n        condition: disk >\
    \ 85%\n        duration: 5m\n        severity: critical\n        message: \"High\
    \ disk utilization detected: {{ value }}%\"\n      \n      - name: HighNetworkUtilization\n\
    \        condition: network > 85Mbps\n        duration: 10m\n        severity:\
    \ warning\n        message: \"High network utilization detected: {{ value }}Mbps\"\
    \n      \n      - name: HighPodRestartRate\n        condition: restarts > 10\n\
    \        duration: 30m\n        severity: warning\n        message: \"High pod\
    \ restart rate detected: {{ value }} restarts\""
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/resource-optimization-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:resource-optimization-config:sha256-25a9cb66af252ae6eb7c0273916b933d96dcda37433fb063f5bd2104f8816a7c
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: resource-optimization-config
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/owner: eco-system
    eco-base/platform: core
  name: resource-optimization-config
  namespace: production
