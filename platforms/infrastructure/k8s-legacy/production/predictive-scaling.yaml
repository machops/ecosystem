---
apiVersion: v1
data:
  predictive-scaling.yaml: "# Predictive scaling configuration\npredictiveScaling:\n\
    \  enabled: true\n  \n  # Time series forecasting\n  forecasting:\n    enabled:\
    \ true\n    model: prophet  # prophet | arima | lstm\n    lookbackPeriod: 30d\n\
    \    forecastHorizon: 7d\n    updateInterval: 1h\n    \n    # Data sources\n \
    \   dataSources:\n      - name: cpu-usage\n        metric: container_cpu_usage_seconds_total\n\
    \        aggregation: rate\n        window: 5m\n      - name: memory-usage\n \
    \       metric: container_memory_working_set_bytes\n        aggregation: avg\n\
    \        window: 5m\n      - name: request-rate\n        metric: istio_requests_total\n\
    \        aggregation: rate\n        window: 5m\n      - name: response-time\n\
    \        metric: istio_request_duration_milliseconds_bucket\n        aggregation:\
    \ histogram_quantile(0.95)\n        window: 5m\n      - name: error-rate\n   \
    \     metric: istio_requests_total{response_code=~\"5..\"}\n        aggregation:\
    \ rate\n        window: 5m\n    \n    # Seasonality patterns\n    seasonality:\n\
    \      daily:\n        enabled: true\n        periods: 24\n        fourierOrder:\
    \ 5\n      weekly:\n        enabled: true\n        periods: 7\n        fourierOrder:\
    \ 3\n      yearly:\n        enabled: true\n        periods: 365\n        fourierOrder:\
    \ 10\n    \n    # Holiday effects\n    holidays:\n      enabled: true\n      regions:\n\
    \        - US\n        - EU\n    \n    # Event-based adjustments\n    events:\n\
    \      enabled: true\n      sources:\n        - name: marketing-events\n     \
    \     type: calendar\n          impact: +50\n          duration: 3d\n        -\
    \ name: product-launches\n          type: calendar\n          impact: +100\n \
    \         duration: 7d\n        - name: scheduled-maintenance\n          type:\
    \ calendar\n          impact: -50\n          duration: 1d\n  \n  # Scaling prediction\n\
    \  scalingPrediction:\n    enabled: true\n    interval: 5m\n    \n    # Predictive\
    \ metrics\n    metrics:\n      - name: predicted-cpu-usage\n        forecastHorizon:\
    \ 1h\n        threshold: 80\n        action: scale-up\n        \n      - name:\
    \ predicted-memory-usage\n        forecastHorizon: 1h\n        threshold: 90\n\
    \        action: scale-up\n        \n      - name: predicted-request-rate\n  \
    \      forecastHorizon: 30m\n        threshold: 1000\n        unit: req/s\n  \
    \      action: scale-up\n        \n      - name: predicted-response-time\n   \
    \     forecastHorizon: 30m\n        threshold: 200\n        unit: ms\n       \
    \ action: scale-up\n    \n    # Scaling strategies\n    strategies:\n      - name:\
    \ proactive-scaling\n        enabled: true\n        leadTime: 30m\n        predictionThreshold:\
    \ 0.8\n        scaleUpFactor: 1.5\n        scaleDownFactor: 0.8\n        \n  \
    \    - name: reactive-scaling\n        enabled: true\n        leadTime: 5m\n \
    \       predictionThreshold: 0.9\n        scaleUpFactor: 1.2\n        scaleDownFactor:\
    \ 0.9\n        \n      - name: hybrid-scaling\n        enabled: true\n       \
    \ proactiveLeadTime: 30m\n        reactiveLeadTime: 5m\n        scaleUpFactor:\
    \ 1.3\n        scaleDownFactor: 0.85\n  \n  # Resource prediction\n  resourcePrediction:\n\
    \    enabled: true\n    interval: 1h\n    \n    resources:\n      - name: replicas\n\
    \        forecastHorizon: 1h\n        minReplicas: 9\n        maxReplicas: 30\n\
    \        stepSize: 3\n        \n      - name: cpu-requests\n        forecastHorizon:\
    \ 1h\n        minRequest: 100m\n        maxRequest: 2000m\n        stepSize: 100m\n\
    \        \n      - name: memory-requests\n        forecastHorizon: 1h\n      \
    \  minRequest: 256Mi\n        maxRequest: 4Gi\n        stepSize: 256Mi\n     \
    \   \n      - name: storage\n        forecastHorizon: 24h\n        minStorage:\
    \ 100Gi\n        maxStorage: 1Ti\n        stepSize: 50Gi\n  \n  # Scaling policies\n\
    \  scalingPolicies:\n    enabled: true\n    \n    # Horizontal Pod Autoscaler\n\
    \    hpa:\n      enabled: true\n      behavior:\n        scaleDown:\n        \
    \  stabilizationWindowSeconds: 300\n          policies:\n          - type: Percent\n\
    \            value: 10\n            periodSeconds: 60\n        scaleUp:\n    \
    \      stabilizationWindowSeconds: 0\n          policies:\n          - type: Percent\n\
    \            value: 50\n            periodSeconds: 60\n          - type: Pods\n\
    \            value: 3\n            periodSeconds: 60\n          selectPolicy:\
    \ Max\n    \n    # Vertical Pod Autoscaler\n    vpa:\n      enabled: true\n  \
    \    updatePolicy:\n        updateMode: Auto\n      resourcePolicy:\n        containerPolicies:\n\
    \        - containerName: '*'\n          minAllowed:\n            cpu: 100m\n\
    \            memory: 256Mi\n          maxAllowed:\n            cpu: 2000m\n  \
    \          memory: 4Gi\n          controlledResources: [\"cpu\", \"memory\"]\n\
    \          controlledValues: RequestsAndLimits\n    \n    # Cluster Autoscaler\n\
    \    clusterAutoscaler:\n      enabled: true\n      minNodes: 3\n      maxNodes:\
    \ 20\n      scaleDownEnabled: true\n      scaleDownUnneededTime: 10m\n      scaleDownUtilizationThreshold:\
    \ 0.5\n      balanceSimilarNodeGroups: true\n  \n  # Predictive alerting\n  alerting:\n\
    \    enabled: true\n    \n    rules:\n      - name: PredictedResourceShortage\n\
    \        condition: predicted-cpu > 90% OR predicted-memory > 95%\n        duration:\
    \ 30m\n        severity: warning\n        message: \"Predicted resource shortage\
    \ in {{ leadTime }}: {{ prediction }}\"\n        \n      - name: ScalingEvent\n\
    \        condition: scaling-triggered\n        severity: info\n        message:\
    \ \"Scaling event triggered: {{ action }} {{ factor }}\"\n        \n      - name:\
    \ PredictionAccuracy\n        condition: prediction-error > 20%\n        duration:\
    \ 1h\n        severity: warning\n        message: \"Prediction accuracy degraded:\
    \ {{ accuracy }}\"\n  \n  # Model training\n  modelTraining:\n    enabled: true\n\
    \    schedule: weekly\n    trainingWindow: 30d\n    validationWindow: 7d\n   \
    \ retrainOnDrift: true\n    driftThreshold: 10\n    \n    modelMetrics:\n    \
    \  - name: mae  # Mean Absolute Error\n        threshold: 10\n      - name: mape\
    \  # Mean Absolute Percentage Error\n        threshold: 15\n      - name: rmse\
    \  # Root Mean Square Error\n        threshold: 20"
kind: ConfigMap
metadata:
  annotations:
    eco-base/uri: eco-base://k8s/core/configmap/predictive-scaling-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:predictive-scaling-config:sha256-a20325fa84a26247e631905a97ce770b92d7f438289a3302272f31b3ce1061e9
  labels: {}
  name: predictive-scaling-config
  namespace: production
