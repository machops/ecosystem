---
apiVersion: v1
data:
  cloudflare.yaml: "cloudflare:\n  enabled: ${CLOUDFLARE_ENABLED:-false}\n  apiToken:\
    \ ${CLOUDFLARE_API_TOKEN:-}\n  accountId: ${CLOUDFLARE_ACCOUNT_ID:-}\n  email:\
    \ ${CLOUDFLARE_EMAIL:-}\n  \n  # Cloudflare Workers\n  workers:\n    enabled:\
    \ ${CLOUDFLARE_WORKERS_ENABLED:-false}\n    scriptName: ${CLOUDFLARE_WORKER_NAME:-machine-native-ops-worker}\n\
    \    runtime: nodejs\n    bindings:\n      - name: KV_NAMESPACE\n        type:\
    \ kv\n        namespaceId: ${CLOUDFLARE_KV_NAMESPACE_ID:-}\n      - name: DURABLE_OBJECT\n\
    \        type: durable-object\n        className: MachineNativeOpsObject\n   \
    \   - name: R2_BUCKET\n        type: r2\n        bucketName: ${CLOUDFLARE_R2_BUCKET:-machine-native-ops}\n\
    \      - name: D1_DATABASE\n        type: d1\n        databaseId: ${CLOUDFLARE_D1_DATABASE_ID:-}\n\
    \    routes:\n      - pattern: https://api.machine-native-ops.com/*\n        zoneId:\
    \ ${CLOUDFLARE_ZONE_ID:-}\n      - pattern: https://*.machine-native-ops.com/*\n\
    \        zoneId: ${CLOUDFLARE_ZONE_ID:-}\n    env:\n      - name: ENVIRONMENT\n\
    \        value: production\n      - name: LOG_LEVEL\n        value: ${LOG_LEVEL:-info}\n\
    \      - name: DATABASE_URL\n        value: ${DATABASE_URL:-}\n      - name: REDIS_URL\n\
    \        value: ${REDIS_URL:-}\n  \n  # Cloudflare Pages\n  pages:\n    enabled:\
    \ ${CLOUDFLARE_PAGES_ENABLED:-false}\n    projectName: ${CLOUDFLARE_PAGES_PROJECT:-machine-native-ops-docs}\n\
    \    productionBranch: main\n    buildCommand: npm run build\n    outputDirectory:\
    \ dist\n    environmentVariables:\n      - name: NODE_ENV\n        value: production\n\
    \      - name: VITE_API_URL\n        value: https://api.machine-native-ops.com\n\
    \    headers:\n      - pattern: /*\n        headers:\n          - name: X-Frame-Options\n\
    \            value: DENY\n          - name: X-Content-Type-Options\n         \
    \   value: nosniff\n          - name: X-XSS-Protection\n            value: 1;\
    \ mode=block\n    redirects:\n      - source: /docs/*\n        destination: https://docs.machine-native-ops.com/:splat\n\
    \        statusCode: 301\n  \n  # Cloudflare D1 Database\n  d1:\n    enabled:\
    \ ${CLOUDFLARE_D1_ENABLED:-false}\n    databaseId: ${CLOUDFLARE_D1_DATABASE_ID:-}\n\
    \    databaseName: ${CLOUDFLARE_D1_DATABASE_NAME:-machine-native-ops-db}\n   \
    \ migrations:\n      path: ./migrations\n      autoApply: true\n    queries:\n\
    \      - name: get-user-by-id\n        query: SELECT * FROM users WHERE id = ?\n\
    \      - name: create-user\n        query: INSERT INTO users (id, name, email)\
    \ VALUES (?, ?, ?)\n  \n  # Cloudflare KV Storage\n  kv:\n    enabled: ${CLOUDFLARE_KV_ENABLED:-false}\n\
    \    namespaceId: ${CLOUDFLARE_KV_NAMESPACE_ID:-}\n    namespaceName: ${CLOUDFLARE_KV_NAMESPACE_NAME:-machine-native-ops-kv}\n\
    \    ttl: ${CLOUDFLARE_KV_TTL:-3600}\n    keys:\n      - name: config\n      \
    \  value: ${CLOUDFLARE_KV_CONFIG:-}\n      - name: cache\n        value: ${CLOUDFLARE_KV_CACHE:-}\n\
    \  \n  # Cloudflare R2 Storage\n  r2:\n    enabled: ${CLOUDFLARE_R2_ENABLED:-false}\n\
    \    bucketName: ${CLOUDFLARE_R2_BUCKET:-machine-native-ops}\n    accessKeyId:\
    \ ${CLOUDFLARE_R2_ACCESS_KEY_ID:-}\n    secretAccessKey: ${CLOUDFLARE_R2_SECRET_ACCESS_KEY:-}\n\
    \    accountId: ${CLOUDFLARE_ACCOUNT_ID:-}\n    endpoint: https://r2.cloudflarestorage.com\n\
    \    publicAccess: false\n    cors:\n      allowedOrigins:\n        - https://machine-native-ops.com\n\
    \        - https://*.machine-native-ops.com\n      allowedMethods:\n        -\
    \ GET\n        - POST\n        - PUT\n        - DELETE\n      allowedHeaders:\n\
    \        - \"*\"\n      maxAge: 3600\n  \n  # Cloudflare Durable Objects\n  durableObjects:\n\
    \    enabled: ${CLOUDFLARE_DURABLE_OBJECTS_ENABLED:-false}\n    className: MachineNativeOpsObject\n\
    \    scriptName: ${CLOUDFLARE_WORKER_NAME:-machine-native-ops-worker}\n    env:\n\
    \      - name: ENVIRONMENT\n        value: production\n  \n  # Cloudflare Email\
    \ Routing\n  emailRouting:\n    enabled: ${CLOUDFLARE_EMAIL_ROUTING_ENABLED:-false}\n\
    \    zoneId: ${CLOUDFLARE_ZONE_ID:-}\n    rules:\n      - name: catch-all\n  \
    \      enabled: true\n        matchers:\n          - type: all\n        actions:\n\
    \          - type: forward\n            value: ${EMAIL_FORWARD_ADDRESS:-}\n  \n\
    \  # Cloudflare Access (Zero Trust)\n  access:\n    enabled: ${CLOUDFLARE_ACCESS_ENABLED:-false}\n\
    \    applications:\n      - name: MachineNativeOps Dashboard\n        domain:\
    \ dashboard.machine-native-ops.com\n        sessionDuration: 24h\n        authProviders:\n\
    \          - type: oidc\n            config:\n              issuerUrl: https://accounts.google.com\n\
    \              clientId: ${GOOGLE_OAUTH_CLIENT_ID:-}\n              clientSecret:\
    \ ${GOOGLE_OAUTH_CLIENT_SECRET:-}\n        policies:\n          - name: allow-verified-users\n\
    \            include:\n              - email:\n                  email: \"*@machine-native-ops.com\"\
    \n            decision: allow\n          - name: deny-all\n            decision:\
    \ deny\n"
  gitbook.yaml: "gitbook:\n  enabled: ${GITBOOK_ENABLED:-false}\n  spaceId: ${GITBOOK_SPACE_ID:-}\n\
    \  accessToken: ${GITBOOK_ACCESS_TOKEN:-}\n  \n  # GitBook Space Configuration\n\
    \  space:\n    name: ${GITBOOK_SPACE_NAME:-MachineNativeOps Documentation}\n \
    \   description: Comprehensive documentation for MachineNativeOps platform\n \
    \   visibility: public\n    url: ${GITBOOK_SPACE_URL:-https://machine-native-ops.gitbook.io}\n\
    \  \n  # Content Configuration\n  content:\n    mainBranch: main\n    rootPath:\
    \ docs\n    structure:\n      - name: Getting Started\n        path: getting-started\n\
    \        order: 1\n        sections:\n          - name: Introduction\n       \
    \     path: introduction.md\n          - name: Quick Start\n            path:\
    \ quick-start.md\n          - name: Installation\n            path: installation.md\n\
    \      - name: Guides\n        path: guides\n        order: 2\n        sections:\n\
    \          - name: Deployment Guide\n            path: deployment.md\n       \
    \   - name: Configuration Guide\n            path: configuration.md\n        \
    \  - name: API Reference\n            path: api-reference.md\n      - name: Tutorials\n\
    \        path: tutorials\n        order: 3\n        sections:\n          - name:\
    \ Basic Tutorial\n            path: basic-tutorial.md\n          - name: Advanced\
    \ Tutorial\n            path: advanced-tutorial.md\n      - name: Reference\n\
    \        path: reference\n        order: 4\n        sections:\n          - name:\
    \ Glossary\n            path: glossary.md\n          - name: FAQ\n           \
    \ path: faq.md\n  \n  # GitBook Features\n  features:\n    # API Reference\n \
    \   apiReference:\n      enabled: ${GITBOOK_API_REFERENCE_ENABLED:-true}\n   \
    \   openApiSpec: ./openapi.yaml\n      theme: light\n    # Code Samples\n    codeSamples:\n\
    \      enabled: ${GITBOOK_CODE_SAMPLES_ENABLED:-true}\n      languages:\n    \
    \    - javascript\n        - python\n        - go\n        - rust\n    # Interactive\
    \ Components\n    interactiveComponents:\n      enabled: ${GITBOOK_INTERACTIVE_ENABLED:-true}\n\
    \      components:\n        - type: code-block\n          config:\n          \
    \  theme: dark\n            lineNumbers: true\n        - type: mermaid-diagram\n\
    \          config:\n            theme: default\n        - type: embed\n      \
    \    config:\n            allowlist:\n              - youtube.com\n          \
    \    - vimeo.com\n              - figma.com\n    # SEO Configuration\n    seo:\n\
    \      enabled: true\n      title: MachineNativeOps Documentation\n      description:\
    \ Comprehensive documentation for the MachineNativeOps platform\n      keywords:\n\
    \        - MachineNativeOps\n        - Machine Learning\n        - AI\n      \
    \  - Infrastructure\n        - DevOps\n      ogImage: ${GITBOOK_OG_IMAGE:-https://machine-native-ops.com/og-image.png}\n\
    \      twitterCard: summary_large_image\n  \n  # GitBook Integrations\n  integrations:\n\
    \    # GitHub Integration\n    github:\n      enabled: ${GITBOOK_GITHUB_INTEGRATION_ENABLED:-true}\n\
    \      repository: MachineNativeOps/machine-native-ops\n      syncBranches:\n\
    \        - main\n        - develop\n      autoSync: true\n      syncInterval:\
    \ 300  # 5 minutes\n    \n    # Slack Integration\n    slack:\n      enabled:\
    \ ${GITBOOK_SLACK_INTEGRATION_ENABLED:-false}\n      webhookUrl: ${SLACK_WEBHOOK_URL:-}\n\
    \      channels:\n        - name: documentation-updates\n          events:\n \
    \           - page_published\n            - page_updated\n            - page_deleted\n\
    \    \n    # Analytics Integration\n    analytics:\n      enabled: ${GITBOOK_ANALYTICS_ENABLED:-true}\n\
    \      providers:\n        - name: google-analytics\n          trackingId: ${GA_TRACKING_ID:-}\n\
    \        - name: plausible\n          domain: ${PLAUSIBLE_DOMAIN:-}\n        -\
    \ name: amplitude\n          apiKey: ${AMPLITUDE_API_KEY:-}\n  \n  # GitBook Webhooks\n\
    \  webhooks:\n    enabled: ${GITBOOK_WEBHOOKS_ENABLED:-true}\n    events:\n  \
    \    - content.published\n      - content.updated\n      - content.deleted\n \
    \     - content.moved\n    endpoints:\n      - url: ${WEBHOOK_ENDPOINT:-https://api.machine-native-ops.com/webhooks/gitbook}\n\
    \        secret: ${WEBHOOK_SECRET:-}\n        events:\n          - content.published\n\
    \          - content.updated"
  supabase.yaml: "supabase:\n  enabled: ${SUPABASE_ENABLED:-false}\n  projectId: ${SUPABASE_PROJECT_ID:-}\n\
    \  apiUrl: ${SUPABASE_API_URL:-https://${SUPABASE_PROJECT_ID}.supabase.co}\n \
    \ anonKey: ${SUPABASE_ANON_KEY:-}\n  serviceRoleKey: ${SUPABASE_SERVICE_ROLE_KEY:-}\n\
    \  \n  # PostgreSQL Database\n  database:\n    enabled: ${SUPABASE_DATABASE_ENABLED:-true}\n\
    \    connectionString: ${SUPABASE_DATABASE_URL:-postgresql://postgres:[YOUR-PASSWORD]@db.${SUPABASE_PROJECT_ID}.supabase.co:5432/postgres}\n\
    \    poolSize: ${SUPABASE_POOL_SIZE:-10}\n    connectionTimeout: 30\n    migrations:\n\
    \      path: ./supabase/migrations\n      autoApply: true\n    schemas:\n    \
    \  - public\n      - storage\n      - auth\n      - graphql_public\n    functions:\n\
    \      - name: get-user-profile\n        schema: public\n        language: plpgsql\n\
    \        body: |\n          BEGIN\n            RETURN SELECT * FROM profiles WHERE\
    \ user_id = auth.uid();\n          END;\n      - name: calculate-metrics\n   \
    \     schema: public\n        language: plpgsql\n        body: |\n          BEGIN\n\
    \            -- Custom metrics calculation logic\n          END;\n    rowLevelSecurity:\n\
    \      enabled: true\n      policies:\n        - name: users-select-own\n    \
    \      table: profiles\n          operation: SELECT\n          definition: \"\
    auth.uid() = user_id\"\n        - name: users-insert-own\n          table: profiles\n\
    \          operation: INSERT\n          definition: \"auth.uid() = user_id\"\n\
    \        - name: users-update-own\n          table: profiles\n          operation:\
    \ UPDATE\n          definition: \"auth.uid() = user_id\"\n  \n  # Supabase Auth\n\
    \  auth:\n    enabled: ${SUPABASE_AUTH_ENABLED:-true}\n    providers:\n      -\
    \ name: email\n        enabled: true\n        requireEmailConfirmation: true\n\
    \        minPasswordLength: 8\n      - name: google\n        enabled: ${GOOGLE_AUTH_ENABLED:-true}\n\
    \        clientId: ${GOOGLE_OAUTH_CLIENT_ID:-}\n        clientSecret: ${GOOGLE_OAUTH_CLIENT_SECRET:-}\n\
    \        scopes:\n          - email\n          - profile\n      - name: github\n\
    \        enabled: ${GITHUB_AUTH_ENABLED:-true}\n        clientId: ${GITHUB_OAUTH_CLIENT_ID:-}\n\
    \        clientSecret: ${GITHUB_OAUTH_CLIENT_SECRET:-}\n        scopes:\n    \
    \      - user:email\n          - read:user\n      - name: azure-ad\n        enabled:\
    \ ${AZURE_AD_AUTH_ENABLED:-false}\n        clientId: ${AZURE_AD_CLIENT_ID:-}\n\
    \        clientSecret: ${AZURE_AD_CLIENT_SECRET:-}\n        tenantId: ${AZURE_AD_TENANT_ID:-}\n\
    \    emailTemplates:\n      confirmation:\n        subject: Confirm your email\n\
    \        template: ./supabase/templates/confirmation.html\n      recovery:\n \
    \       subject: Reset your password\n        template: ./supabase/templates/recovery.html\n\
    \      emailChange:\n        subject: Confirm email change\n        template:\
    \ ./supabase/templates/email-change.html\n    session:\n      duration: 3600 \
    \ # 1 hour\n      inactivityTimeout: 300  # 5 minutes\n    mfa:\n      enabled:\
    \ ${SUPABASE_MFA_ENABLED:-true}\n      factor: totp\n      issuer: MachineNativeOps\n\
    \  \n  # Supabase Storage\n  storage:\n    enabled: ${SUPABASE_STORAGE_ENABLED:-true}\n\
    \    buckets:\n      - name: documents\n        public: false\n        fileSizeLimit:\
    \ 10485760  # 10MB\n        allowedMimeTypes:\n          - application/pdf\n \
    \         - application/msword\n          - application/vnd.openxmlformats-officedocument.wordprocessingml.document\n\
    \          - text/plain\n        cors:\n          allowedOrigins:\n          \
    \  - https://machine-native-ops.com\n            - https://*.machine-native-ops.com\n\
    \          allowedMethods:\n            - POST\n            - GET\n          \
    \  - PUT\n            - DELETE\n          allowedHeaders:\n            - \"*\"\
    \n          maxAge: 3600\n      - name: images\n        public: true\n       \
    \ fileSizeLimit: 5242880  # 5MB\n        allowedMimeTypes:\n          - image/jpeg\n\
    \          - image/png\n          - image/gif\n          - image/webp\n      \
    \  transformations:\n          enabled: true\n          formats:\n           \
    \ - thumbnail:\n                width: 200\n                height: 200\n    \
    \            fit: cover\n            - medium:\n                width: 800\n \
    \               height: 600\n                fit: inside\n            - large:\n\
    \                width: 1920\n                height: 1080\n                fit:\
    \ inside\n      - name: backups\n        public: false\n        fileSizeLimit:\
    \ 1073741824  # 1GB\n        allowedMimeTypes:\n          - application/zip\n\
    \          - application/x-tar\n          - application/gzip\n    policies:\n\
    \      - name: documents-select-own\n        bucket: documents\n        operation:\
    \ SELECT\n        definition: \"auth.uid() = storage.foldername\"\n      - name:\
    \ documents-insert-own\n        bucket: documents\n        operation: INSERT\n\
    \        definition: \"auth.uid() = storage.foldername\"\n  \n  # Supabase Edge\
    \ Functions\n  edgeFunctions:\n    enabled: ${SUPABASE_EDGE_FUNCTIONS_ENABLED:-true}\n\
    \    runtime: deno\n    timeout: 60\n    memory: 512\n    functions:\n      -\
    \ name: hello-world\n        path: /hello\n        method: GET\n        code:\
    \ |\n          import { serve } from \"https://deno.land/std@0.168.0/http/server.ts\"\
    \n          \n          serve(async (req) => {\n            const url = new URL(req.url)\n\
    \            const name = url.searchParams.get('name') || 'World'\n          \
    \  \n            return new Response(JSON.stringify({ message: `Hello ${name}!`\
    \ }), {\n              headers: { 'Content-Type': 'application/json' },\n    \
    \        })\n          })\n      - name: webhook-handler\n        path: /webhook\n\
    \        method: POST\n        code: ./supabase/functions/webhook-handler/index.ts\n\
    \        env:\n          - name: WEBHOOK_SECRET\n            value: ${WEBHOOK_SECRET:-}\n\
    \  \n  # Supabase Realtime\n  realtime:\n    enabled: ${SUPABASE_REALTIME_ENABLED:-true}\n\
    \    channels:\n      - name: notifications\n        enabled: true\n        broadcast:\n\
    \          - self: true\n          - others: true\n        presence:\n       \
    \   - key: user_id\n        postgresChanges:\n          - event: INSERT\n    \
    \        schema: public\n            table: notifications\n            filter:\
    \ user_id=eq.user_id()\n      - name: tasks\n        enabled: true\n        broadcast:\n\
    \          - self: true\n        postgresChanges:\n          - event: ALL\n  \
    \          schema: public\n            table: tasks\n"
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/extended-platforms-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:extended-platforms-config:sha256-c2872fc63e2ec9192da8c81e4a2397b0e5f6a413a45b6d61e0eb149f09be5628
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: extended-platforms-config
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/owner: eco-system
    eco-base/platform: core
  name: extended-platforms-config
  namespace: production
