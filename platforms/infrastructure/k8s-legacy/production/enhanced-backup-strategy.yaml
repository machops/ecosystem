---
apiVersion: v1
data:
  backup-policy.yaml: "# Enhanced backup policy with cross-region replication\nbackupPolicy:\n\
    \  # Local backups (primary region)\n  local:\n    enabled: true\n    storage:\n\
    \      type: s3\n      endpoint: https://s3.us-east-1.amazonaws.com\n      bucket:\
    \ machine-native-ops-backups-primary\n      region: us-east-1\n    schedules:\n\
    \      full-cluster:\n        enabled: true\n        schedule: \"0 2 * * *\" \
    \ # Daily at 2 AM UTC\n        retention: 30d\n        type: full\n        includeNamespaces:\n\
    \          - production\n          - istio-system\n          - monitoring\n  \
    \    incremental:\n        enabled: true\n        schedule: \"0 * * * *\"  # Hourly\n\
    \        retention: 7d\n        type: incremental\n        includeNamespaces:\n\
    \          - production\n  \n  # Cross-region replication (DR region)\n  crossRegion:\n\
    \    enabled: true\n    regions:\n      - name: us-west-2\n        storage:\n\
    \          type: s3\n          endpoint: https://s3.us-west-2.amazonaws.com\n\
    \          bucket: machine-native-ops-backups-dr\n          region: us-west-2\n\
    \        replicationMode: async\n        syncSchedule: \"0 3 * * *\"  # Daily\
    \ at 3 AM UTC\n        retention: 90d\n      - name: eu-west-1\n        storage:\n\
    \          type: s3\n          endpoint: https://s3.eu-west-1.amazonaws.com\n\
    \          bucket: machine-native-ops-backups-eu\n          region: eu-west-1\n\
    \        replicationMode: async\n        syncSchedule: \"0 4 * * *\"  # Daily\
    \ at 4 AM UTC\n        retention: 90d\n  \n  # Database-specific backups\n  databases:\n\
    \    postgresql:\n      enabled: true\n      primary:\n        schedule: \"0 */4\
    \ * * *\"  # Every 4 hours\n        retention: 30d\n        storage: local\n \
    \     crossRegion:\n        schedule: \"0 5 * * *\"  # Daily at 5 AM UTC\n   \
    \     retention: 90d\n        storage: crossRegion\n    redis:\n      enabled:\
    \ true\n      primary:\n        schedule: \"*/30 * * * *\"  # Every 30 minutes\n\
    \        retention: 7d\n        storage: local\n      crossRegion:\n        schedule:\
    \ \"0 6 * * *\"  # Daily at 6 AM UTC\n        retention: 30d\n        storage:\
    \ crossRegion\n  \n  # Configuration backups\n  configuration:\n    enabled: true\n\
    \    schedule: \"*/30 * * * *\"  # Every 30 minutes\n    retention: 90d\n    includeResources:\n\
    \      - configmaps\n      - secrets\n      - deployments\n      - services\n\
    \      - ingress\n      - networkpolicies\n      - poddisruptionbudgets"
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/velero-enhanced-backup-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:velero-enhanced-backup-config:sha256-631b4c6fe31f60d3e1be815e5f321a3774e81a00835e38a418c2b0697e6cea0d
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: velero-enhanced-backup-config
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/owner: eco-system
    eco-base/platform: core
  name: velero-enhanced-backup-config
  namespace: velero
