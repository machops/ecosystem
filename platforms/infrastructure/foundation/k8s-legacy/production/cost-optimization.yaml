---
apiVersion: v1
data:
  cost-optimization-policy.yaml: "# Cost optimization configuration\ncostOptimization:\n\
    \  enabled: true\n  \n  # Budget management\n  budgets:\n    enabled: true\n \
    \   currency: USD\n    \n    # Monthly budget targets\n    monthly:\n      total:\n\
    \        target: 100000  # $100,000/month\n        threshold: 80  # Alert at 80%\n\
    \        actionThreshold: 90  # Take action at 90%\n      \n      byService:\n\
    \        machine-native-ops:\n          target: 40000\n          threshold: 80\n\
    \        infrastructure:\n          target: 30000\n          threshold: 80\n \
    \       monitoring:\n          target: 15000\n          threshold: 80\n      \
    \  backup:\n          target: 10000\n          threshold: 80\n        logging:\n\
    \          target: 5000\n          threshold: 80\n      \n      byResource:\n\
    \        compute:\n          target: 50000\n          threshold: 75\n        storage:\n\
    \          target: 20000\n          threshold: 80\n        network:\n        \
    \  target: 15000\n          threshold: 85\n        database:\n          target:\
    \ 15000\n          threshold: 80\n  \n  # Right-sizing recommendations\n  rightSizing:\n\
    \    enabled: true\n    interval: 1h\n    cpuThreshold: 30\n    memoryThreshold:\
    \ 40\n    lookbackPeriod: 7d\n    \n    recommendations:\n      - type: downsize\n\
    \        condition: cpu < 30% AND memory < 40%\n        action: reduce-replicas\n\
    \        maxReduction: 50%\n      \n      - type: downsize\n        condition:\
    \ cpu < 30% AND memory < 40%\n        action: reduce-resources\n        maxReduction:\
    \ 30%\n      \n      - type: rightsize\n        condition: 30% < cpu < 70% AND\
    \ 40% < memory < 80%\n        action: optimize-resources\n        adjustment:\
    \ proportional\n  \n  # Instance optimization\n  instanceOptimization:\n    enabled:\
    \ true\n    strategy: cost-performance\n    \n    # Compute instances\n    compute:\n\
    \      current:\n        type: m5.large\n        vcpus: 2\n        memory: 8Gi\n\
    \        cost: 0.096  # $0.096/hour\n      recommendations:\n        - type: spot-instance\n\
    \          savings: 70\n          risk: medium\n          requirements:\n    \
    \        - stateless\n            - fault-tolerant\n        - type: reserved-instance\n\
    \          savings: 40\n          risk: low\n          commitment: 1y\n    \n\
    \    # Storage optimization\n    storage:\n      enabled: true\n      policies:\n\
    \        - name: lifecycle-policy\n          rules:\n            - transition:\
    \ standard-to-ia\n              days: 30\n              savings: 50\n        \
    \    - transition: ia-to-glacier\n              days: 90\n              savings:\
    \ 80\n            - expiration\n              days: 365\n        \n        - name:\
    \ compression\n          enabled: true\n          algorithm: gzip\n          savings:\
    \ 30\n        \n        - name: deduplication\n          enabled: true\n     \
    \     savings: 25\n        \n        - name: tiered-storage\n          enabled:\
    \ true\n          tiers:\n            - name: hot\n              storageClass:\
    \ gp3\n              cost: 0.08  # $0.08/GB/month\n            - name: warm\n\
    \              storageClass: standard\n              cost: 0.025  # $0.025/GB/month\n\
    \            - name: cold\n              storageClass: glacier\n             \
    \ cost: 0.004  # $0.004/GB/month\n  \n  # Network cost optimization\n  network:\n\
    \    enabled: true\n    \n    # Data transfer optimization\n    dataTransfer:\n\
    \      enabled: true\n      policies:\n        - name: compress-data\n       \
    \   enabled: true\n          savings: 30\n          applyTo:\n            - api-responses\n\
    \            - logs\n            - backups\n        \n        - name: cdn-caching\n\
    \          enabled: true\n          savings: 40\n          applyTo:\n        \
    \    - static-assets\n            - api-responses\n            - documentation\n\
    \        \n        - name: regional-traffic\n          enabled: true\n       \
    \   policy: local-preference\n          savings: 20\n    \n    # Inter-region\
    \ data transfer\n    interRegion:\n      enabled: true\n      optimization:\n\
    \        - name: batch-transfers\n          schedule: off-peak\n          savings:\
    \ 25\n        - name: compression\n          enabled: true\n          savings:\
    \ 30\n  \n  # Database cost optimization\n  database:\n    enabled: true\n   \
    \ \n    # PostgreSQL optimization\n    postgresql:\n      enabled: true\n    \
    \  policies:\n        - name: connection-pooling\n          enabled: true\n  \
    \        savings: 15\n        \n        - name: read-replicas\n          enabled:\
    \ true\n          strategy: demand-based\n          minReplicas: 1\n         \
    \ maxReplicas: 3\n          savings: 20\n        \n        - name: query-optimization\n\
    \          enabled: true\n          savings: 25\n          interval: 1d\n    \
    \    \n        - name: storage-optimization\n          enabled: true\n       \
    \   policies:\n            - vacuum-regular\n              savings: 10\n     \
    \       - archive-old-data\n              savings: 30\n              retention:\
    \ 90d\n    \n    # Redis optimization\n    redis:\n      enabled: true\n     \
    \ policies:\n        - name: maxmemory-policy\n          policy: allkeys-lru\n\
    \          savings: 20\n        \n        - name: key-expiration\n          enabled:\
    \ true\n          defaultTTL: 3600  # 1 hour\n          savings: 30\n        \n\
    \        - name: compression\n          enabled: true\n          savings: 25\n\
    \  \n  # Monitoring and alerting\n  monitoring:\n    enabled: true\n    interval:\
    \ 1h\n    metrics:\n      - total-cost\n      - cost-by-service\n      - cost-by-resource\n\
    \      - savings-achieved\n      - optimization-recommendations\n    alerting:\n\
    \      - budget-exceeded\n      - high-cost-anomaly\n      - cost-spike\n  \n\
    \  # Reporting\n  reporting:\n    enabled: true\n    schedule: weekly\n    formats:\n\
    \      - html\n      - pdf\n      - csv\n    recipients:\n      - finance@machine-native-ops.com\n\
    \      - ops@machine-native-ops.com\n    content:\n      - cost-summary\n    \
    \  - savings-achieved\n      - recommendations\n      - trends"
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/cost-optimization-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:cost-optimization-config:sha256-7aefdfb4ec24eea418cb9cb525c62cab0dc9e3193add003f2ef554e428dd00f9
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: cost-optimization-config
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/owner: eco-system
    eco-base/platform: core
  name: cost-optimization-config
  namespace: production
