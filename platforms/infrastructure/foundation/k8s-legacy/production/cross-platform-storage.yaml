---
apiVersion: v1
data:
  backup-storage.yaml: "backupStorage:\n  enabled: true\n  provider: ${BACKUP_PROVIDER:-aws}\
    \  # aws | gcp | azure | minio\n  \n  # Primary Backup Location\n  primary:\n\
    \    provider: aws\n    type: s3\n    bucket: ${BACKUP_BUCKET:-machine-native-ops-backups}\n\
    \    prefix: backups/\n    region: ${AWS_REGION:-us-east-1}\n    encryption: AES256\n\
    \    lifecycle:\n      - transition:\n          days: 30\n          storageClass:\
    \ STANDARD_IA\n      - expiration:\n          days: 90\n  \n  # DR Backup Location\
    \ 1\n  dr1:\n    provider: aws\n    type: s3\n    bucket: ${BACKUP_BUCKET_DR1:-machine-native-ops-backups-dr1}\n\
    \    prefix: backups/\n    region: ${DR1_REGION:-us-west-2}\n    encryption: AES256\n\
    \    lifecycle:\n      - expiration:\n          days: 180\n  \n  # DR Backup Location\
    \ 2\n  dr2:\n    provider: gcp\n    type: gcs\n    bucket: ${BACKUP_BUCKET_DR2:-machine-native-ops-backups-dr2}\n\
    \    prefix: backups/\n    project: ${GCP_PROJECT:-}\n    encryption: true\n \
    \   lifecycle:\n      - action: delete\n        condition:\n          age: 180\n\
    \  \n  # Archive Location\n  archive:\n    provider: azure\n    type: blob\n \
    \   container: ${ARCHIVE_CONTAINER:-machine-native-ops-archive}\n    prefix: archives/\n\
    \    encryption: true\n    lifecycle:\n      - enableVersioning: true\n      -\
    \ daysAfterModifyingGreaterThan: 365\n        delete: true"
  cache-storage.yaml: "cacheStorage:\n  # Redis Storage\n  redis:\n    provider: ${REDIS_PROVIDER:-aws}\
    \  # aws | gcp | azure | on-prem\n    \n    aws:\n      service: elasticache\n\
    \      engine: redis\n      version: 7.0\n      nodeType: ${REDIS_NODE_TYPE:-cache.r6g.xlarge}\n\
    \      numCacheNodes: 3\n      replicationGroup: true\n      multiAZ: true\n \
    \     automaticFailover: true\n      encryptionAtRest: true\n      encryptionInTransit:\
    \ true\n      authTokenEnabled: false\n      clusterMode: false\n      snapshotRetentionLimit:\
    \ 7\n      snapshotWindow: 02:00-03:00\n      maintenanceWindow: sun:03:00-sun:04:00\n\
    \      redisConfiguration:\n        maxmemory-policy: allkeys-lru\n        maxmemory:\
    \ ${REDIS_MAXMEMORY:-8GB}\n        timeout: 300\n    \n    gcp:\n      service:\
    \ memorystore\n      engine: redis\n      version: REDIS_7_0\n      tier: ${REDIS_TIER:-STANDARD_HA}\n\
    \      memorySizeGb: ${REDIS_MEMORY_SIZE:-16}\n      redisConfig:\n        maxmemory-policy:\
    \ allkeys-lru\n      readReplicas: 3\n      transitEncryption: true\n      authEnabled:\
    \ true\n    \n    azure:\n      service: redis-cache\n      sku: ${AZURE_REDIS_SKU:-Premium}\n\
    \      size: ${AZURE_REDIS_SIZE:-P6}\n      capacity: 3\n      enableNonSslPort:\
    \ false\n        minSslVersion: TLS1_2\n      replicaCount: 3\n      shardCount:\
    \ 3\n      redisConfiguration:\n        maxmemory-policy: allkeys-lru\n      \
    \  maxmemory: ${REDIS_MAXMEMORY:-8GB}\n        maxfragmentationmemory-reserved:\
    \ 100\n        notify-keyspace-events: KEA\n"
  database-storage.yaml: "databaseStorage:\n  # PostgreSQL Storage\n  postgresql:\n\
    \    provider: ${POSTGRES_PROVIDER:-aws}  # aws | gcp | azure | on-prem\n    \n\
    \    aws:\n      service: rds\n      engine: postgres\n      version: 15\n   \
    \   instanceClass: ${RDS_INSTANCE_CLASS:-db.r6g.xlarge}\n      allocatedStorage:\
    \ ${RDS_STORAGE:-100}\n      storageType: ${RDS_STORAGE_TYPE:-gp3}\n      iops:\
    \ ${RDS_IOPS:-3000}\n      multiAZ: true\n      backupRetention: 30\n      backupWindow:\
    \ 03:00-04:00\n      maintenanceWindow: sun:04:00-sun:05:00\n      encryption:\
    \ true\n      kmsKeyId: ${KMS_KEY_ID:-}\n      performanceInsights: true\n   \
    \   monitoringInterval: 60\n    \n    gcp:\n      service: cloud-sql\n      engine:\
    \ postgres\n      version: POSTGRES_15\n      tier: ${CLOUDSQL_TIER:-db-custom-4-16384}\n\
    \      diskSize: ${CLOUDSQL_DISK_SIZE:-100}\n      diskType: ${CLOUDSQL_DISK_TYPE:-PD_SSD}\n\
    \      availabilityType: REGIONAL\n      backupRetention: 30\n      pointInTimeRecovery:\
    \ true\n      binaryLogEnabled: true\n      databaseFlags:\n        - name: max_connections\n\
    \          value: \"200\"\n        - name: shared_buffers\n          value: \"\
    4GB\"\n        - name: effective_cache_size\n          value: \"12GB\"\n    \n\
    \    azure:\n      service: sql-database\n      engine: postgresql\n      version:\
    \ 15\n      sku: ${AZURE_SQL_SKU:-GP_Gen5_8}\n      maxSizeBytes: 107374182400\
    \  # 100GB\n      backupRetentionDays: 30\n      geoRedundantBackup: true\n  \
    \    zoneRedundant: true\n      transparentDataEncryption: true\n  \n  # MySQL\
    \ Storage\n  mysql:\n    provider: ${MYSQL_PROVIDER:-aws}  # aws | gcp | azure\
    \ | on-prem\n    \n    aws:\n      service: rds\n      engine: mysql\n      version:\
    \ 8.0\n      instanceClass: ${RDS_INSTANCE_CLASS:-db.r6g.xlarge}\n      allocatedStorage:\
    \ ${RDS_STORAGE:-100}\n      storageType: ${RDS_STORAGE_TYPE:-gp3}\n      multiAZ:\
    \ true\n      backupRetention: 30\n      encryption: true\n      kmsKeyId: ${KMS_KEY_ID:-}\n\
    \    \n    gcp:\n      service: cloud-sql\n      engine: mysql\n      version:\
    \ MYSQL_8_0\n      tier: ${CLOUDSQL_TIER:-db-custom-4-16384}\n      diskSize:\
    \ ${CLOUDSQL_DISK_SIZE:-100}\n      diskType: ${CLOUDSQL_DISK_TYPE:-PD_SSD}\n\
    \      availabilityType: REGIONAL\n      backupRetention: 30\n      pointInTimeRecovery:\
    \ true\n    \n    azure:\n      service: sql-database\n      engine: mysql\n \
    \     version: 8.0\n      sku: ${AZURE_SQL_SKU:-GP_Gen5_8}\n      maxSizeBytes:\
    \ 107374182400\n      backupRetentionDays: 30\n      geoRedundantBackup: true\n\
    \      zoneRedundant: true\n"
  object-storage.yaml: "apiVersion: v1\nkind: Secret\nmetadata:\n  name: object-storage-credentials\n\
    \  namespace: production\ntype: Opaque\nstringData:\n  # AWS S3\n  aws_access_key_id:\
    \ ${AWS_ACCESS_KEY_ID:-}\n  aws_secret_access_key: ${AWS_SECRET_ACCESS_KEY:-}\n\
    \  aws_region: ${AWS_REGION:-us-east-1}\n  aws_endpoint: ${AWS_S3_ENDPOINT:-https://s3.amazonaws.com}\n\
    \  \n  # Google Cloud Storage\n  gcp_service_account_key: ${GCP_SERVICE_ACCOUNT_KEY:-}\n\
    \  gcp_project: ${GCP_PROJECT:-}\n  gcp_bucket: ${GCS_BUCKET:-}\n  gcp_endpoint:\
    \ ${GCS_ENDPOINT:-https://storage.googleapis.com}\n  \n  # Azure Blob Storage\n\
    \  azure_storage_account: ${AZURE_STORAGE_ACCOUNT:-}\n  azure_storage_key: ${AZURE_STORAGE_KEY:-}\n\
    \  azure_container: ${AZURE_CONTAINER:-}\n  azure_endpoint: ${AZURE_BLOB_ENDPOINT:-https://${AZURE_STORAGE_ACCOUNT}.blob.core.windows.net}\n\
    \  \n  # MinIO / S3-Compatible\n  minio_access_key: ${MINIO_ACCESS_KEY:-}\n  minio_secret_key:\
    \ ${MINIO_SECRET_KEY:-}\n  minio_endpoint: ${MINIO_ENDPOINT:-http://minio:9000}\n\
    \  minio_use_ssl: ${MINIO_USE_SSL:-false}\n  \n  # Local Storage\n  local_path:\
    \ ${LOCAL_STORAGE_PATH:-/data/storage}\n"
  s3-compatible.yaml: "s3Storage:\n  enabled: true\n  provider: ${S3_PROVIDER:-aws}\
    \  # aws | minio | wasabi | digitalocean | backblaze\n  \n  # AWS S3 Configuration\n\
    \  aws:\n    region: ${AWS_REGION:-us-east-1}\n    bucket: ${S3_BUCKET:-machine-native-ops}\n\
    \    prefix: ${S3_PREFIX:-data/}\n    endpoint: ${S3_ENDPOINT:-https://s3.amazonaws.com}\n\
    \    forcePathStyle: false\n    sse: AES256  # Server-side encryption\n    acl:\
    \ private\n    lifecycle:\n      enabled: true\n      rules:\n        - id: transition-to-ia\n\
    \          status: enabled\n          filter:\n            prefix: archive/\n\
    \          transitions:\n            - days: 30\n              storageClass: STANDARD_IA\n\
    \            - days: 90\n              storageClass: GLACIER\n        - id: delete-old-files\n\
    \          status: enabled\n          expiration:\n            days: 365\n  \n\
    \  # Google Cloud Storage (S3-compatible)\n  gcs:\n    project: ${GCP_PROJECT:-}\n\
    \    bucket: ${GCS_BUCKET:-machine-native-ops}\n    prefix: ${GCS_PREFIX:-data/}\n\
    \    endpoint: ${GCS_ENDPOINT:-https://storage.googleapis.com}\n    forcePathStyle:\
    \ false\n    sse: true\n    lifecycle:\n      enabled: true\n      rules:\n  \
    \      - action: delete\n          condition:\n            age: 365\n  \n  # Azure\
    \ Blob Storage (S3-compatible)\n  azure:\n    account: ${AZURE_STORAGE_ACCOUNT:-}\n\
    \    container: ${AZURE_CONTAINER:-machine-native-ops}\n    prefix: ${AZURE_PREFIX:-data/}\n\
    \    endpoint: ${AZURE_BLOB_ENDPOINT:-https://${AZURE_STORAGE_ACCOUNT}.blob.core.windows.net}\n\
    \    forcePathStyle: false\n    sse: true\n    lifecycle:\n      enabled: true\n\
    \      rules:\n        - enableVersioning: true\n        - daysAfterModifyingGreaterThan:\
    \ 365\n          delete: true\n  \n  # MinIO Configuration\n  minio:\n    endpoint:\
    \ ${MINIO_ENDPOINT:-http://minio:9000}\n    accessKey: ${MINIO_ACCESS_KEY:-}\n\
    \    secretKey: ${MINIO_SECRET_KEY:-}\n    bucket: ${MINIO_BUCKET:-machine-native-ops}\n\
    \    prefix: ${MINIO_PREFIX:-data/}\n    useSSL: ${MINIO_USE_SSL:-false}\n   \
    \ region: ${MINIO_REGION:-us-east-1}\n    lifecycle:\n      enabled: true\n  \
    \    rules:\n        - days: 90\n          delete: true\n  \n  # Wasabi Configuration\n\
    \  wasabi:\n    region: ${WASABI_REGION:-us-east-1}\n    bucket: ${WASABI_BUCKET:-machine-native-ops}\n\
    \    prefix: ${WASABI_PREFIX:-data/}\n    endpoint: ${WASABI_ENDPOINT:-https://s3.wasabisys.com}\n\
    \    accessKey: ${WASABI_ACCESS_KEY:-}\n    secretKey: ${WASABI_SECRET_KEY:-}\n\
    \    forcePathStyle: true\n  \n  # DigitalOcean Spaces Configuration\n  digitalocean:\n\
    \    region: ${DO_REGION:-nyc3}\n    bucket: ${DO_BUCKET:-machine-native-ops}\n\
    \    prefix: ${DO_PREFIX:-data/}\n    endpoint: ${DO_ENDPOINT:-https://nyc3.digitaloceanspaces.com}\n\
    \    accessKey: ${DO_ACCESS_KEY:-}\n    secretKey: ${DO_SECRET_KEY:-}\n    forcePathStyle:\
    \ false\n"
  storage-interface.yaml: "apiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n\
    \  name: universal-storage\n  annotations:\n    storageclass.kubernetes.io/is-default-class:\
    \ \"true\"\nprovisioner: ${STORAGE_PROVISIONER:-kubernetes.io/aws-ebs}\nparameters:\n\
    \  # AWS EBS parameters\n  type: ${STORAGE_TYPE:-gp3}\n  encrypted: \"true\"\n\
    \  kmsKeyId: ${KMS_KEY_ID:-}\n  iops: ${IOPS:-3000}\n  throughput: ${THROUGHPUT:-125}\n\
    \  \n  # GCP Persistent Disk parameters\n  type: ${GCP_DISK_TYPE:-pd-balanced}\n\
    \  replication-type: ${REPLICATION_TYPE:-regional-pd}\n  \n  # Azure Managed Disk\
    \ parameters\n  skuName: ${AZURE_DISK_SKU:-StandardSSD_LRS}\n  cachingMode: ${AZURE_CACHE_MODE:-ReadWrite}\n\
    reclaimPolicy: Retain\nallowVolumeExpansion: true\nvolumeBindingMode: WaitForFirstConsumer\n\
    allowedTopologies:\n  - matchLabelExpressions:\n    - key: topology.kubernetes.io/zone\n\
    \      values:\n        - ${ZONE_1:-us-east-1a}\n        - ${ZONE_2:-us-east-1b}\n\
    \        - ${ZONE_3:-us-east-1c}\n"
kind: ConfigMap
metadata:
  annotations:
    eco-base/audit-log-level: minimal
    eco-base/governance-policy: standard-v1
    eco-base/uri: eco-base://k8s/core/configmap/cross-platform-storage-config
    eco-base/urn: urn:eco-base:k8s:core:configmap:cross-platform-storage-config:sha256-360f8634c11e1cd8d3349ff5f5b71f5daf7cccc4499ef9f817d4c5a240f6bdfa
  labels:
    app.kubernetes.io/component: eco-component
    app.kubernetes.io/instance: eco-instance
    app.kubernetes.io/name: cross-platform-storage-config
    app.kubernetes.io/part-of: eco-base
    app.kubernetes.io/version: 1.0.0
    eco-base/environment: development
    eco-base/owner: eco-system
    eco-base/platform: core
  name: cross-platform-storage-config
  namespace: production
